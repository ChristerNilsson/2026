// Generated by CoffeeScript 2.7.0
var D, N, Player, checkEnd, createProblem, echo, keyx, level, pendingLevel, perfectPath, player1, player2, players, pressed, range, renderMoves, requiredMoves, setLevel, setPerfectPath, setShowResults, showResults, solution, start, startLevel, t0, t1, target, undoMap;

import {
  mount,
  signal,
  button,
  div,
  span,
  table,
  tr,
  td
} from "https://cdn.jsdelivr.net/gh/sigmentjs/sigment-ng@1.3.4/dist/index.js";

import _ from "https://cdn.jsdelivr.net/npm/lodash-es@4.17.21/lodash.js";

N = 8;

D = [[-2, 1], [-1, 2], [1, 2], [2, 1], [-2, -1], [-1, -2], [1, -2], [2, -1]];

echo = console.log;

range = _.range;

Player = class Player {
  constructor(curr, letters, requiredMoves) {
    this.letters = letters;
    [this.curr, this.setCurr] = signal(curr);
    [this.board, this.setBoard] = signal(this.rboard());
    [this.remaining, this.setRemaining] = signal(requiredMoves);
    this.history = [this.curr()];
  }

  letter(i, j) {
    var dx, dy, idx, k, len, ref, x, y;
    if (_.isEqual([i, j], this.curr())) {
      return keyx(this.curr());
    }
    if (_.isEqual([i, j], target)) {
      return keyx(target);
    }
    ref = range(D.length);
    for (k = 0, len = ref.length; k < len; k++) {
      idx = ref[k];
      [dx, dy] = D[idx];
      [x, y] = this.curr();
      if (_.isEqual([i, j], [x + dx, y + dy])) {
        return this.letters[idx];
      }
    }
    return "";
  }

  rboard() {
    var base, i, j, style;
    return table({
      style: "text-align:center;"
    }, (function() {
      var k, len, ref, results;
      ref = range(N - 1, -1, -1);
      results = [];
      for (k = 0, len = ref.length; k < len; k++) {
        j = ref[k];
        results.push(tr({}, td({
          style: "text-align:center;"
        }, `${(j + 1) % 10}`), (function() {
          var l, len1, ref1, results1;
          ref1 = range(N);
          results1 = [];
          for (l = 0, len1 = ref1.length; l < len1; l++) {
            i = ref1[l];
            base = (i + j) % 2 === 0 ? "#b58863" : "#f0d9b5";
            style = _.isEqual([i, j], this.curr()) ? "background:red; color:white; text-align:center;" : _.isEqual([i, j], target) ? "background:green; color:white; text-align:center;" : `background:${base}; text-align:center;`;
            results1.push(td({style}, this.letter(i, j)));
          }
          return results1;
        }).call(this)));
      }
      return results;
    }).call(this), tr({}, (function() {
      var k, len, ref, results;
      ref = range(N + 1);
      results = [];
      for (k = 0, len = ref.length; k < len; k++) {
        i = ref[k];
        results.push(td({
          style: "text-align:center;"
        }, " abcdefgh"[i]));
      }
      return results;
    })()));
  }

  update(idx) {
    var dx, dy, x, xdx, y, ydy;
    [dx, dy] = D[idx];
    [x, y] = this.curr();
    xdx = x + dx;
    ydy = y + dy;
    if ((0 <= xdx && xdx < N) && (0 <= ydy && ydy < N)) {
      this.history.push(this.curr());
      this.setCurr([xdx, ydy]);
      this.setBoard(this.rboard());
      return true;
    }
    return false;
  }

  undo() {
    if (this.history.length === 0) {
      return false;
    }
    this.setCurr(this.history.pop());
    this.setBoard(this.rboard());
    return true;
  }

  reached() {
    return _.isEqual(this.curr(), target);
  }

  movesTaken() {
    return this.history.length - 1;
  }

  pathString() {
    var path;
    path = this.history.slice();
    if (!_.isEqual(path[path.length - 1], this.curr())) {
      path.push(this.curr());
    }
    return path.map(keyx).join(' ');
  }

  pathArray(includeStart = true) {
    var out, path;
    path = this.history.slice();
    if (!_.isEqual(path[path.length - 1], this.curr())) {
      path.push(this.curr());
    }
    out = path.map(keyx);
    if (includeStart) {
      return out;
    } else {
      return out.slice(1);
    }
  }

  reset(curr, requiredMoves) {
    this.setCurr(curr);
    this.setRemaining(requiredMoves);
    this.history = [curr];
    return this.setBoard(this.rboard());
  }

  tick() {
    return this.setRemaining(this.remaining() - 1);
  }

  render() {
    return div({}, this.board, div({}, div({}, () => { // signal kräver en funktion
      return keyx(this.curr()) + " to " + keyx(target); // signal kräver en funktion med =
    }), div({}, () => {
      return `steg kvar: ${this.remaining()}`;
    })));
  }

};

keyx = function([x, y]) {
  return "abcdefgh"[x] + "12345678"[y];
};

renderMoves = function(moves) {
  var move;
  return div({
    style: "display:flex; flex-direction:column; gap:2px; min-width:36px; text-align:center;"
  }, (function() {
    var k, len, results;
    results = [];
    for (k = 0, len = moves.length; k < len; k++) {
      move = moves[k];
      results.push(div({
        style: "text-align:center;"
      }, move));
    }
    return results;
  })());
};

createProblem = function(level) {
  var dx, dy, findSolution, front0, front1, k, key, len, reached, start, target, x, x0, y, y0;
  findSolution = function() {
    var curr, path;
    echo('findSolution', target);
    path = [];
    curr = keyx(target);
    while (curr !== 'start') {
      path.push(curr);
      curr = reached[curr];
    }
    path.reverse();
    return path.join(' ');
  };
  start = [_.random(0, N - 1), _.random(0, N - 1)];
  reached = {};
  reached[keyx(start)] = 'start';
  front0 = [start];
  while (level > 0) {
    level = level - 1;
    front1 = [];
    for (k = 0, len = front0.length; k < len; k++) {
      [x0, y0] = front0[k];
      for (key in D) {
        [dx, dy] = D[key];
        [x, y] = [x0 + dx, y0 + dy];
        if ((0 <= x && x < N) && (0 <= y && y < N) && !reached[keyx([x, y])]) {
          reached[keyx([x, y])] = keyx([x0, y0]);
          front1.push([x, y]);
        }
      }
    }
    if (front1.length === 0) {
      target = _.sample(front0);
      return [start, target, findSolution()];
    } else {
      front0 = front1;
    }
    target = _.sample(front1);
  }
  // echo reached
  return [start, target, findSolution()];
};

[level, setLevel] = signal(2);

[showResults, setShowResults] = signal(false);

[perfectPath, setPerfectPath] = signal([]);

start = null;

target = null;

solution = "";

requiredMoves = 0;

pendingLevel = null;

t0 = performance.now();

[start, target, solution] = createProblem(level());

t1 = performance.now();

echo("solution:", solution);

requiredMoves = solution.trim().length === 0 ? 0 : solution.split(' ').length - 1;

performance.now();

echo('problem created in', t1 - t0, 's');

echo(`${keyx(start)} to ${keyx(target)}`);

player1 = new Player(start, "QWRTASDF", requiredMoves);

player2 = new Player(start, "YUOPHJKL", requiredMoves);

startLevel = function(newLevel) {
  var lvl;
  lvl = Math.max(1, newLevel);
  [start, target, solution] = createProblem(lvl);
  requiredMoves = solution.trim().length === 0 ? 0 : solution.split(' ').length - 1;
  setLevel(lvl);
  setShowResults(false);
  setPerfectPath([]);
  player1.reset(start, requiredMoves);
  player2.reset(start, requiredMoves);
  pressed.clear();
  echo("solution:", solution);
  return echo(`${keyx(start)} to ${keyx(target)}`);
};

pressed = new Set();

players = [player1, player2];

undoMap = new Map([['e', player1], ['i', player2]]);

checkEnd = function() {
  var nextLevel, p1Perfect, p2Perfect;
  if (!(player1.reached() && player2.reached())) {
    return;
  }
  p1Perfect = player1.movesTaken() === requiredMoves;
  p2Perfect = player2.movesTaken() === requiredMoves;
  nextLevel = p1Perfect && p2Perfect ? level() + 1 : level() - 1;
  pendingLevel = nextLevel;
  setPerfectPath(solution.trim().length === 0 ? [] : solution.split(' '));
  setShowResults(true);
  return nextLevel;
};

document.addEventListener('keydown', function(e) {
  var idx, isSpace, k, key, len, player;
  key = e.key.toLowerCase();
  isSpace = e.code === 'Space' || key === ' ';
  if (showResults()) {
    if (isSpace) {
      setShowResults(false);
      setPerfectPath([]);
      startLevel(pendingLevel);
    }
    return;
  }
  if (pressed.has(key)) {
    return;
  }
  pressed.add(key);
  if (undoMap.has(key)) {
    player = undoMap.get(key);
    if (player.reached()) {
      return;
    }
    player.undo();
    return;
  }
  for (k = 0, len = players.length; k < len; k++) {
    player = players[k];
    idx = player.letters.toLowerCase().indexOf(key);
    if (idx !== -1) {
      if (player.reached()) {
        return;
      }
      if (player.update(idx)) {
        player.tick();
      }
      checkEnd();
      return;
    }
  }
});

document.addEventListener('keyup', function(e) {
  return pressed.delete(e.key.toLowerCase());
});

mount("app", div({}, div({
  style: "display:flex; gap:20px; align-items:flex-start;"
}, player1.render(), div({
  style: "display:flex; gap:16px;"
}, div({}, () => {
  if (showResults()) {
    return renderMoves(player1.pathArray(false));
  } else {
    return "";
  }
}), div({}, () => {
  if (showResults()) {
    return renderMoves(perfectPath());
  } else {
    return "";
  }
}), div({}, () => {
  if (showResults()) {
    return renderMoves(player2.pathArray(false));
  } else {
    return "";
  }
})), player2.render()), div({}, () => {
  return `Level: ${level()}`;
})));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6IlxcIiwic291cmNlcyI6WyJza2V0Y2guY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsTUFBQSxFQUFBLFFBQUEsRUFBQSxhQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsWUFBQSxFQUFBLFdBQUEsRUFBQSxPQUFBLEVBQUEsT0FBQSxFQUFBLE9BQUEsRUFBQSxPQUFBLEVBQUEsS0FBQSxFQUFBLFdBQUEsRUFBQSxhQUFBLEVBQUEsUUFBQSxFQUFBLGNBQUEsRUFBQSxjQUFBLEVBQUEsV0FBQSxFQUFBLFFBQUEsRUFBQSxLQUFBLEVBQUEsVUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsTUFBQSxFQUFBOztBQUFBLE9BQUE7RUFBUyxLQUFUO0VBQWdCLE1BQWhCO0VBQXdCLE1BQXhCO0VBQWdDLEdBQWhDO0VBQXFDLElBQXJDO0VBQTJDLEtBQTNDO0VBQWtELEVBQWxEO0VBQXNELEVBQXREO0NBQUEsTUFBQTs7QUFDQSxPQUFPLENBQVAsTUFBQTs7QUFFQSxDQUFBLEdBQUk7O0FBRUosQ0FBQSxHQUFJLENBQUMsQ0FBQyxDQUFDLENBQUYsRUFBSyxDQUFMLENBQUQsRUFBVSxDQUFDLENBQUMsQ0FBRixFQUFLLENBQUwsQ0FBVixFQUFtQixDQUFFLENBQUYsRUFBSyxDQUFMLENBQW5CLEVBQTRCLENBQUUsQ0FBRixFQUFLLENBQUwsQ0FBNUIsRUFBcUMsQ0FBQyxDQUFDLENBQUYsRUFBSSxDQUFDLENBQUwsQ0FBckMsRUFBOEMsQ0FBQyxDQUFDLENBQUYsRUFBSSxDQUFDLENBQUwsQ0FBOUMsRUFBdUQsQ0FBRSxDQUFGLEVBQUksQ0FBQyxDQUFMLENBQXZELEVBQWdFLENBQUUsQ0FBRixFQUFJLENBQUMsQ0FBTCxDQUFoRTs7QUFFSixJQUFBLEdBQU8sT0FBTyxDQUFDOztBQUNmLEtBQUEsR0FBUSxDQUFDLENBQUM7O0FBRUos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LCB0YWJsZSwgdHIsIHRkIH0gZnJvbSBcImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9zaWdtZW50anMvc2lnbWVudC1uZ0AxLjMuNC9kaXN0L2luZGV4LmpzXCJcbmltcG9ydCBfIGZyb20gXCJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xvZGFzaC1lc0A0LjE3LjIxL2xvZGFzaC5qc1wiXG5cbk4gPSA4XG5cbkQgPSBbWy0yLCAxXSwgWy0xLCAyXSwgWyAxLCAyXSwgWyAyLCAxXSwgWy0yLC0xXSwgWy0xLC0yXSwgWyAxLC0yXSwgWyAyLC0xXV1cblxuZWNobyA9IGNvbnNvbGUubG9nXG5yYW5nZSA9IF8ucmFuZ2VcblxuY2xhc3MgUGxheWVyXG5cblx0Y29uc3RydWN0b3I6IChjdXJyLCBAbGV0dGVycywgcmVxdWlyZWRNb3ZlcykgLT5cblx0XHRbQGN1cnIsIEBzZXRDdXJyXSA9IHNpZ25hbCBjdXJyXG5cdFx0W0Bib2FyZCxAc2V0Qm9hcmRdID0gc2lnbmFsIEByYm9hcmQoKVxuXHRcdFtAcmVtYWluaW5nLCBAc2V0UmVtYWluaW5nXSA9IHNpZ25hbCByZXF1aXJlZE1vdmVzXG5cdFx0QGhpc3RvcnkgPSBbQGN1cnIoKV0gXG5cblx0bGV0dGVyIDogKGksIGopIC0+XG5cdFx0aWYgXy5pc0VxdWFsIFtpLGpdLCBAY3VycigpIHRoZW4gcmV0dXJuIGtleXggQGN1cnIoKVxuXHRcdGlmIF8uaXNFcXVhbCBbaSxqXSwgdGFyZ2V0IHRoZW4gcmV0dXJuIGtleXggdGFyZ2V0XG5cdFx0Zm9yIGlkeCBpbiByYW5nZSBELmxlbmd0aFxuXHRcdFx0W2R4LCBkeV0gPSBEW2lkeF1cblx0XHRcdFt4LHldID0gQGN1cnIoKVxuXHRcdFx0aWYgXy5pc0VxdWFsIFtpLGpdLCBbeCArIGR4LCB5ICsgZHldIHRoZW4gcmV0dXJuIEBsZXR0ZXJzW2lkeF1cblx0XHRcIlwiXG5cblx0cmJvYXJkIDogLT5cblx0XHR0YWJsZSB7c3R5bGU6XCJ0ZXh0LWFsaWduOmNlbnRlcjtcIn0sXG5cdFx0XHRmb3IgaiBpbiByYW5nZSBOLTEsLTEsLTFcblx0XHRcdFx0dHIge30sXG5cdFx0XHRcdFx0dGQge3N0eWxlOlwidGV4dC1hbGlnbjpjZW50ZXI7XCJ9LCBcIiN7KGogKyAxKSAlIDEwfVwiXG5cdFx0XHRcdFx0Zm9yIGkgaW4gcmFuZ2UgTlxuXHRcdFx0XHRcdFx0YmFzZSA9IGlmIChpICsgaikgJSAyID09IDAgdGhlbiBcIiNiNTg4NjNcIiBlbHNlIFwiI2YwZDliNVwiXG5cdFx0XHRcdFx0XHRzdHlsZSA9XG5cdFx0XHRcdFx0XHRcdGlmIF8uaXNFcXVhbCBbaSxqXSwgQGN1cnIoKSB0aGVuIFwiYmFja2dyb3VuZDpyZWQ7IGNvbG9yOndoaXRlOyB0ZXh0LWFsaWduOmNlbnRlcjtcIlxuXHRcdFx0XHRcdFx0XHRlbHNlIGlmIF8uaXNFcXVhbCBbaSxqXSwgdGFyZ2V0IHRoZW4gXCJiYWNrZ3JvdW5kOmdyZWVuOyBjb2xvcjp3aGl0ZTsgdGV4dC1hbGlnbjpjZW50ZXI7XCJcblx0XHRcdFx0XHRcdFx0ZWxzZSBcImJhY2tncm91bmQ6I3tiYXNlfTsgdGV4dC1hbGlnbjpjZW50ZXI7XCJcblx0XHRcdFx0XHRcdHRkIHtzdHlsZX0sIEBsZXR0ZXIgaSxqXG5cdFx0XHR0ciB7fSxcblx0XHRcdFx0Zm9yIGkgaW4gcmFuZ2UgTisxXG5cdFx0XHRcdFx0dGQge3N0eWxlOlwidGV4dC1hbGlnbjpjZW50ZXI7XCJ9LCBcIiBhYmNkZWZnaFwiW2ldXG5cblx0dXBkYXRlIDogKGlkeCkgLT5cblx0XHRbZHgsIGR5XSA9IERbaWR4XVxuXHRcdFt4LHldID0gQGN1cnIoKVxuXHRcdHhkeCA9IHggKyBkeFxuXHRcdHlkeSA9IHkgKyBkeVxuXG5cdFx0aWYgMCA8PSB4ZHggPCBOIGFuZCAwIDw9IHlkeSA8IE5cblx0XHRcdEBoaXN0b3J5LnB1c2ggQGN1cnIoKVxuXHRcdFx0QHNldEN1cnIgW3hkeCwgeWR5XVxuXHRcdFx0QHNldEJvYXJkIEByYm9hcmQoKVxuXHRcdFx0cmV0dXJuIHRydWVcblx0XHRmYWxzZVxuXG5cdHVuZG8gOiAoKSAtPlxuXHRcdGlmIEBoaXN0b3J5Lmxlbmd0aCA9PSAwIHRoZW4gcmV0dXJuIGZhbHNlXG5cdFx0QHNldEN1cnIgQGhpc3RvcnkucG9wKClcblx0XHRAc2V0Qm9hcmQgQHJib2FyZCgpXG5cdFx0dHJ1ZVxuXG5cdHJlYWNoZWQgOiAoKSAtPlxuXHRcdF8uaXNFcXVhbCBAY3VycigpLCB0YXJnZXRcblxuXHRtb3Zlc1Rha2VuIDogKCkgLT5cblx0XHRAaGlzdG9yeS5sZW5ndGggLSAxXG5cdFx0XG5cdHBhdGhTdHJpbmcgOiAoKSAtPlxuXHRcdHBhdGggPSBAaGlzdG9yeS5zbGljZSgpXG5cdFx0aWYgbm90IF8uaXNFcXVhbCBwYXRoW3BhdGgubGVuZ3RoIC0gMV0sIEBjdXJyKCkgdGhlbiBwYXRoLnB1c2ggQGN1cnIoKVxuXHRcdHBhdGgubWFwKGtleXgpLmpvaW4gJyAnXG5cdFx0XG5cdHBhdGhBcnJheSA6IChpbmNsdWRlU3RhcnQgPSB0cnVlKSAtPlxuXHRcdHBhdGggPSBAaGlzdG9yeS5zbGljZSgpXG5cdFx0aWYgbm90IF8uaXNFcXVhbCBwYXRoW3BhdGgubGVuZ3RoIC0gMV0sIEBjdXJyKCkgdGhlbiBwYXRoLnB1c2ggQGN1cnIoKVxuXHRcdG91dCA9IHBhdGgubWFwKGtleXgpXG5cdFx0aWYgaW5jbHVkZVN0YXJ0IHRoZW4gb3V0IGVsc2Ugb3V0LnNsaWNlIDFcblx0XHRcblx0cmVzZXQgOiAoY3VyciwgcmVxdWlyZWRNb3ZlcykgLT5cblx0XHRAc2V0Q3VyciBjdXJyXG5cdFx0QHNldFJlbWFpbmluZyByZXF1aXJlZE1vdmVzXG5cdFx0QGhpc3RvcnkgPSBbY3Vycl1cblx0XHRAc2V0Qm9hcmQgQHJib2FyZCgpXG5cdFx0XG5cdHRpY2sgOiAoKSAtPlxuXHRcdEBzZXRSZW1haW5pbmcgQHJlbWFpbmluZygpIC0gMVxuXG5cdHJlbmRlciA6IC0+XG5cdFx0ZGl2IHt9LFxuXHRcdFx0QGJvYXJkICMgc2lnbmFsIGtyw6R2ZXIgZW4gZnVua3Rpb25cblx0XHRcdGRpdiB7fSxcblx0XHRcdFx0ZGl2IHt9LCA9PiBrZXl4KEBjdXJyKCkpICsgXCIgdG8gXCIgKyBrZXl4KHRhcmdldCkgIyBzaWduYWwga3LDpHZlciBlbiBmdW5rdGlvbiBtZWQgPVxuXHRcdFx0XHRkaXYge30sID0+IFwic3RlZyBrdmFyOiAje0ByZW1haW5pbmcoKX1cIlxuXG5rZXl4ID0gKFt4LHldKSAtPiBcImFiY2RlZmdoXCJbeF0gKyBcIjEyMzQ1Njc4XCJbeV1cblxucmVuZGVyTW92ZXMgPSAobW92ZXMpIC0+XG5cdGRpdiB7c3R5bGU6XCJkaXNwbGF5OmZsZXg7IGZsZXgtZGlyZWN0aW9uOmNvbHVtbjsgZ2FwOjJweDsgbWluLXdpZHRoOjM2cHg7IHRleHQtYWxpZ246Y2VudGVyO1wifSxcblx0XHRmb3IgbW92ZSBpbiBtb3Zlc1xuXHRcdFx0ZGl2IHtzdHlsZTpcInRleHQtYWxpZ246Y2VudGVyO1wifSwgbW92ZVxuXG5jcmVhdGVQcm9ibGVtID0gKGxldmVsKSAtPlxuXG5cdGZpbmRTb2x1dGlvbiA9IC0+XG5cdFx0ZWNobyAnZmluZFNvbHV0aW9uJyx0YXJnZXRcblx0XHRwYXRoID0gW10gXG5cdFx0Y3VyciA9IGtleXggdGFyZ2V0XG5cdFx0d2hpbGUgY3VyciAhPSAnc3RhcnQnXG5cdFx0XHRwYXRoLnB1c2ggY3VyclxuXHRcdFx0Y3VyciA9IHJlYWNoZWRbY3Vycl1cblx0XHRwYXRoLnJldmVyc2UoKVxuXHRcdHBhdGguam9pbiAnICdcblxuXHRzdGFydCA9IFtfLnJhbmRvbSgwLE4tMSksIF8ucmFuZG9tKDAsTi0xKV1cblx0cmVhY2hlZCA9IHt9XG5cdHJlYWNoZWRba2V5eCBzdGFydF0gPSAnc3RhcnQnXG5cdGZyb250MCA9IFtzdGFydF1cblx0d2hpbGUgbGV2ZWwgPiAwXG5cdFx0bGV2ZWwgPSBsZXZlbCAtIDFcblx0XHRmcm9udDEgPSBbXVxuXHRcdGZvciBbeDAseTBdIGluIGZyb250MFxuXHRcdFx0Zm9yIGtleSBvZiBEXG5cdFx0XHRcdFtkeCwgZHldID0gRFtrZXldXG5cdFx0XHRcdFt4LCB5XSA9IFt4MCArIGR4LCB5MCArIGR5XVxuXHRcdFx0XHRpZiAwIDw9IHggPCBOIGFuZCAwIDw9IHkgPCBOIGFuZCBub3QgcmVhY2hlZFtrZXl4IFt4LHldXVxuXHRcdFx0XHRcdHJlYWNoZWRba2V5eCBbeCx5XV0gPSBrZXl4IFt4MCx5MF1cblx0XHRcdFx0XHRmcm9udDEucHVzaCBbeCx5XVxuXHRcdGlmIGZyb250MS5sZW5ndGggPT0gMFxuXHRcdFx0dGFyZ2V0ID0gXy5zYW1wbGUgZnJvbnQwXG5cdFx0XHRyZXR1cm4gW3N0YXJ0LCB0YXJnZXQsIGZpbmRTb2x1dGlvbigpXVxuXHRcdGVsc2UgZnJvbnQwID0gZnJvbnQxXG5cdFx0dGFyZ2V0ID0gXy5zYW1wbGUgZnJvbnQxXG5cdCMgZWNobyByZWFjaGVkXG5cdFtzdGFydCwgdGFyZ2V0LCBmaW5kU29sdXRpb24oKV1cblxuW2xldmVsLCBzZXRMZXZlbF0gPSBzaWduYWwgMlxuW3Nob3dSZXN1bHRzLCBzZXRTaG93UmVzdWx0c10gPSBzaWduYWwgZmFsc2VcbltwZXJmZWN0UGF0aCwgc2V0UGVyZmVjdFBhdGhdID0gc2lnbmFsIFtdXG5cbnN0YXJ0ID0gbnVsbFxudGFyZ2V0ID0gbnVsbFxuc29sdXRpb24gPSBcIlwiXG5yZXF1aXJlZE1vdmVzID0gMFxucGVuZGluZ0xldmVsID0gbnVsbFxuXG50MCA9IHBlcmZvcm1hbmNlLm5vdygpXG5bc3RhcnQsdGFyZ2V0LHNvbHV0aW9uXSA9IGNyZWF0ZVByb2JsZW0gbGV2ZWwoKVxudDEgPSBwZXJmb3JtYW5jZS5ub3coKVxuZWNobyBcInNvbHV0aW9uOlwiLCBzb2x1dGlvblxucmVxdWlyZWRNb3ZlcyA9IGlmIHNvbHV0aW9uLnRyaW0oKS5sZW5ndGggPT0gMCB0aGVuIDAgZWxzZSBzb2x1dGlvbi5zcGxpdCgnICcpLmxlbmd0aCAtIDFcblxucGVyZm9ybWFuY2Uubm93KClcbmVjaG8gJ3Byb2JsZW0gY3JlYXRlZCBpbicsICh0MSAtIHQwKSwgJ3MnXG5lY2hvIFwiI3trZXl4KHN0YXJ0KX0gdG8gI3trZXl4KHRhcmdldCl9XCJcbnBsYXllcjEgPSBuZXcgUGxheWVyIHN0YXJ0LCBcIlFXUlRBU0RGXCIsIHJlcXVpcmVkTW92ZXNcbnBsYXllcjIgPSBuZXcgUGxheWVyIHN0YXJ0LCBcIllVT1BISktMXCIsIHJlcXVpcmVkTW92ZXNcblxuc3RhcnRMZXZlbCA9IChuZXdMZXZlbCkgLT5cblx0bHZsID0gTWF0aC5tYXggMSwgbmV3TGV2ZWxcblx0W3N0YXJ0LHRhcmdldCxzb2x1dGlvbl0gPSBjcmVhdGVQcm9ibGVtIGx2bFxuXHRyZXF1aXJlZE1vdmVzID0gaWYgc29sdXRpb24udHJpbSgpLmxlbmd0aCA9PSAwIHRoZW4gMCBlbHNlIHNvbHV0aW9uLnNwbGl0KCcgJykubGVuZ3RoIC0gMVxuXHRzZXRMZXZlbCBsdmxcblx0c2V0U2hvd1Jlc3VsdHMgZmFsc2Vcblx0c2V0UGVyZmVjdFBhdGggW11cblx0cGxheWVyMS5yZXNldCBzdGFydCwgcmVxdWlyZWRNb3Zlc1xuXHRwbGF5ZXIyLnJlc2V0IHN0YXJ0LCByZXF1aXJlZE1vdmVzXG5cdHByZXNzZWQuY2xlYXIoKVxuXHRlY2hvIFwic29sdXRpb246XCIsIHNvbHV0aW9uXG5cdGVjaG8gXCIje2tleXgoc3RhcnQpfSB0byAje2tleXgodGFyZ2V0KX1cIlxuXG5wcmVzc2VkID0gbmV3IFNldCgpXG5wbGF5ZXJzID0gW3BsYXllcjEsIHBsYXllcjJdXG51bmRvTWFwID0gbmV3IE1hcCBbXG5cdFsnZScsIHBsYXllcjFdXG5cdFsnaScsIHBsYXllcjJdXG5dXG5cbmNoZWNrRW5kID0gKCkgLT5cblx0cmV0dXJuIHVubGVzcyBwbGF5ZXIxLnJlYWNoZWQoKSBhbmQgcGxheWVyMi5yZWFjaGVkKClcblx0cDFQZXJmZWN0ID0gcGxheWVyMS5tb3Zlc1Rha2VuKCkgPT0gcmVxdWlyZWRNb3Zlc1xuXHRwMlBlcmZlY3QgPSBwbGF5ZXIyLm1vdmVzVGFrZW4oKSA9PSByZXF1aXJlZE1vdmVzXG5cdG5leHRMZXZlbCA9IGlmIHAxUGVyZmVjdCBhbmQgcDJQZXJmZWN0IHRoZW4gbGV2ZWwoKSArIDEgZWxzZSBsZXZlbCgpIC0gMVxuXHRwZW5kaW5nTGV2ZWwgPSBuZXh0TGV2ZWxcblx0c2V0UGVyZmVjdFBhdGggaWYgc29sdXRpb24udHJpbSgpLmxlbmd0aCA9PSAwIHRoZW4gW10gZWxzZSBzb2x1dGlvbi5zcGxpdCAnICdcblx0c2V0U2hvd1Jlc3VsdHMgdHJ1ZVxuXHRuZXh0TGV2ZWxcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAna2V5ZG93bicsIChlKSAtPlxuXHRrZXkgPSBlLmtleS50b0xvd2VyQ2FzZSgpXG5cdGlzU3BhY2UgPSBlLmNvZGUgPT0gJ1NwYWNlJyBvciBrZXkgPT0gJyAnXG5cdGlmIHNob3dSZXN1bHRzKClcblx0XHRpZiBpc1NwYWNlXG5cdFx0XHRzZXRTaG93UmVzdWx0cyBmYWxzZVxuXHRcdFx0c2V0UGVyZmVjdFBhdGggW11cblx0XHRcdHN0YXJ0TGV2ZWwgcGVuZGluZ0xldmVsXG5cdFx0cmV0dXJuXG5cdHJldHVybiBpZiBwcmVzc2VkLmhhcyBrZXlcblx0cHJlc3NlZC5hZGQga2V5XG5cdGlmIHVuZG9NYXAuaGFzIGtleVxuXHRcdHBsYXllciA9IHVuZG9NYXAuZ2V0KGtleSlcblx0XHRyZXR1cm4gaWYgcGxheWVyLnJlYWNoZWQoKVxuXHRcdHBsYXllci51bmRvKClcblx0XHRyZXR1cm5cblx0Zm9yIHBsYXllciBpbiBwbGF5ZXJzXG5cdFx0aWR4ID0gcGxheWVyLmxldHRlcnMudG9Mb3dlckNhc2UoKS5pbmRleE9mIGtleVxuXHRcdGlmIGlkeCAhPSAtMVxuXHRcdFx0cmV0dXJuIGlmIHBsYXllci5yZWFjaGVkKClcblx0XHRcdGlmIHBsYXllci51cGRhdGUgaWR4IHRoZW4gcGxheWVyLnRpY2soKVxuXHRcdFx0Y2hlY2tFbmQoKVxuXHRcdFx0cmV0dXJuXG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgJ2tleXVwJywgKGUpIC0+XG5cdHByZXNzZWQuZGVsZXRlIGUua2V5LnRvTG93ZXJDYXNlKClcbiAgXG5tb3VudCBcImFwcFwiLCBcblx0ZGl2IHt9LFxuXHRcdGRpdiB7c3R5bGU6XCJkaXNwbGF5OmZsZXg7IGdhcDoyMHB4OyBhbGlnbi1pdGVtczpmbGV4LXN0YXJ0O1wifSxcblx0XHRcdHBsYXllcjEucmVuZGVyKClcblx0XHRcdGRpdiB7c3R5bGU6XCJkaXNwbGF5OmZsZXg7IGdhcDoxNnB4O1wifSxcblx0XHRcdFx0ZGl2IHt9LCA9PiBpZiBzaG93UmVzdWx0cygpIHRoZW4gcmVuZGVyTW92ZXMgcGxheWVyMS5wYXRoQXJyYXkoZmFsc2UpIGVsc2UgXCJcIlxuXHRcdFx0XHRkaXYge30sID0+IGlmIHNob3dSZXN1bHRzKCkgdGhlbiByZW5kZXJNb3ZlcyBwZXJmZWN0UGF0aCgpIGVsc2UgXCJcIlxuXHRcdFx0XHRkaXYge30sID0+IGlmIHNob3dSZXN1bHRzKCkgdGhlbiByZW5kZXJNb3ZlcyBwbGF5ZXIyLnBhdGhBcnJheShmYWxzZSkgZWxzZSBcIlwiXG5cdFx0XHRwbGF5ZXIyLnJlbmRlcigpXG5cdFx0ZGl2IHt9LCA9PiBcIkxldmVsOiAje2xldmVsKCl9XCJcbiJdfQ==
//# sourceURL=c:\github\2026\005-shortcut2D\sketch.coffee