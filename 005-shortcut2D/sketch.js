// Generated by CoffeeScript 2.7.0
var D, N, Player, createProblem, echo, keyx, player1, player2, players, pressed, range, solution, start, t0, t1, target, undoMap;

import {
  mount,
  signal,
  button,
  div,
  span,
  table,
  tr,
  td
} from "https://cdn.jsdelivr.net/gh/sigmentjs/sigment-ng@1.3.4/dist/index.js";

import _ from "https://cdn.jsdelivr.net/npm/lodash-es@4.17.21/lodash.js";

N = 8;

D = [[1, 2], [2, 1], [2, -1], [1, -2], [-1, 2], [-2, 1], [-2, -1], [-1, -2]];

echo = console.log;

range = _.range;

Player = class Player {
  constructor(curr, letters) {
    this.letters = letters;
    [this.curr, this.setCurr] = signal(curr);
    [this.board, this.setBoard] = signal(this.rboard());
    this.history = [this.curr()];
  }

  letter(i, j) {
    var dx, dy, idx, k, len, ref, x, y;
    if (_.isEqual([i, j], this.curr())) {
      return keyx(this.curr());
    }
    if (_.isEqual([i, j], target)) {
      return keyx(target);
    }
    ref = range(D.length);
    for (k = 0, len = ref.length; k < len; k++) {
      idx = ref[k];
      [dx, dy] = D[idx];
      [x, y] = this.curr();
      if (_.isEqual([i, j], [x + dx, y + dy])) {
        return this.letters[idx];
      }
    }
    return "";
  }

  rboard() {
    var base, i, j, style;
    return table({
      style: "text-align:center;"
    }, (function() {
      var k, len, ref, results;
      ref = range(N - 1, -1, -1);
      results = [];
      for (k = 0, len = ref.length; k < len; k++) {
        j = ref[k];
        results.push(tr({}, td({
          style: "text-align:center;"
        }, `${(j + 1) % 10}`), (function() {
          var l, len1, ref1, results1;
          ref1 = range(N);
          results1 = [];
          for (l = 0, len1 = ref1.length; l < len1; l++) {
            i = ref1[l];
            base = (i + j) % 2 === 0 ? "#b58863" : "#f0d9b5";
            style = _.isEqual([i, j], this.curr()) ? "background:red; color:white; text-align:center;" : _.isEqual([i, j], target) ? "background:green; color:white; text-align:center;" : `background:${base}; text-align:center;`;
            results1.push(td({style}, this.letter(i, j)));
          }
          return results1;
        }).call(this)));
      }
      return results;
    }).call(this), tr({}, (function() {
      var k, len, ref, results;
      ref = range(N + 1);
      results = [];
      for (k = 0, len = ref.length; k < len; k++) {
        i = ref[k];
        results.push(td({
          style: "text-align:center;"
        }, " abcdefgh"[i]));
      }
      return results;
    })()));
  }

  update(idx) {
    var dx, dy, x, xdx, y, ydy;
    [dx, dy] = D[idx];
    [x, y] = this.curr();
    xdx = x + dx;
    ydy = y + dy;
    if ((0 <= xdx && xdx < N) && (0 <= ydy && ydy < N)) {
      this.history.push(this.curr());
      this.setCurr([xdx, ydy]);
      return this.setBoard(this.rboard());
    }
  }

  undo() {
    if (this.history.length === 0) {
      return;
    }
    this.setCurr(this.history.pop());
    return this.setBoard(this.rboard());
  }

  render() {
    return div({}, this.board, div({}, div({}, () => { // signal kräver en funktion
      return keyx(this.curr()) + " to " + keyx(target); // signal kräver en funktion med =
    })));
  }

};

keyx = function([x, y]) {
  return "abcdefgh"[x] + "12345678"[y];
};

createProblem = function(level) {
  var dx, dy, findSolution, front0, front1, k, key, len, reached, start, target, x, x0, y, y0;
  findSolution = function() {
    var curr, path;
    echo('findSolution', target);
    path = [];
    curr = keyx(target);
    while (curr !== 'start') {
      path.push(curr);
      curr = reached[curr];
    }
    path.reverse();
    return path.join(' ');
  };
  start = [_.random(0, N - 1), _.random(0, N - 1)];
  reached = {};
  reached[keyx(start)] = 'start';
  front0 = [start];
  while (level > 0) {
    level = level - 1;
    front1 = [];
    for (k = 0, len = front0.length; k < len; k++) {
      [x0, y0] = front0[k];
      for (key in D) {
        [dx, dy] = D[key];
        [x, y] = [x0 + dx, y0 + dy];
        if ((0 <= x && x < N) && (0 <= y && y < N) && !reached[keyx([x, y])]) {
          reached[keyx([x, y])] = keyx([x0, y0]);
          front1.push([x, y]);
        }
      }
    }
    if (front1.length === 0) {
      target = _.sample(front0);
      return [start, target, findSolution()];
    } else {
      front0 = front1;
    }
    target = _.sample(front1);
  }
  // echo reached
  return [start, target, findSolution()];
};

t0 = performance.now();

[start, target, solution] = createProblem(4);

t1 = performance.now();

echo("solution:", solution);

performance.now();

echo('problem created in', t1 - t0, 's');

echo(`${keyx(start)} to ${keyx(target)}`);

player1 = new Player(start, "QWRTASDF");

player2 = new Player(start, "YUOPHJKL");

pressed = new Set();

players = [player1, player2];

undoMap = new Map([['e', player1], ['i', player2]]);

document.addEventListener('keydown', function(e) {
  var idx, k, key, len, player;
  key = e.key.toLowerCase();
  if (pressed.has(key)) {
    return;
  }
  pressed.add(key);
  if (undoMap.has(key)) {
    undoMap.get(key).undo();
    return;
  }
  for (k = 0, len = players.length; k < len; k++) {
    player = players[k];
    idx = player.letters.toLowerCase().indexOf(key);
    if (idx !== -1) {
      player.update(idx);
      return;
    }
  }
});

document.addEventListener('keyup', function(e) {
  return pressed.delete(e.key.toLowerCase());
});

mount("app", div({
  style: "display:flex; gap:20px;"
}, player1.render(), player2.render()));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6IlxcIiwic291cmNlcyI6WyJza2V0Y2guY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsTUFBQSxFQUFBLGFBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLE9BQUEsRUFBQSxPQUFBLEVBQUEsT0FBQSxFQUFBLE9BQUEsRUFBQSxLQUFBLEVBQUEsUUFBQSxFQUFBLEtBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLE1BQUEsRUFBQTs7QUFBQSxPQUFBO0VBQVMsS0FBVDtFQUFnQixNQUFoQjtFQUF3QixNQUF4QjtFQUFnQyxHQUFoQztFQUFxQyxJQUFyQztFQUEyQyxLQUEzQztFQUFrRCxFQUFsRDtFQUFzRCxFQUF0RDtDQUFBLE1BQUE7O0FBQ0EsT0FBTyxDQUFQLE1BQUE7O0FBRUEsQ0FBQSxHQUFJOztBQUVKLENBQUEsR0FBSSxDQUFDLENBQUUsQ0FBRixFQUFLLENBQUwsQ0FBRCxFQUFVLENBQUUsQ0FBRixFQUFLLENBQUwsQ0FBVixFQUFtQixDQUFFLENBQUYsRUFBSSxDQUFDLENBQUwsQ0FBbkIsRUFBNEIsQ0FBRSxDQUFGLEVBQUksQ0FBQyxDQUFMLENBQTVCLEVBQXFDLENBQUMsQ0FBQyxDQUFGLEVBQUssQ0FBTCxDQUFyQyxFQUE4QyxDQUFDLENBQUMsQ0FBRixFQUFLLENBQUwsQ0FBOUMsRUFBdUQsQ0FBQyxDQUFDLENBQUYsRUFBSSxDQUFDLENBQUwsQ0FBdkQsRUFBZ0UsQ0FBQyxDQUFDLENBQUYsRUFBSSxDQUFDLENBQUwsQ0FBaEU7O0FBRUosSUFBQSxHQUFPLE9BQU8sQ0FBQzs7QUFDZixLQUFBLEdBQVEsQ0FBQyxDQUFDOztBQUVKLFNBQU4sTUFBQSxPQUFBO0VBRUMsV0FBYSxDQUFDLElBQUQsU0FBQSxDQUFBO0lBQU8sSUFBQyxDQUFBO0lBQ3BCLENBQUMsSUFBQyxDQUFBLElBQUYsRUFBUSxJQUFDLENBQUEsT0FBVCxDQUFB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QUFYO01BQ0MsTUFBTSxDQUFDLE1BQVAsQ0FBYyxHQUFkO0FBQ0EsYUFGRDs7RUFGRDtBQVBvQyxDQUFyQzs7QUFhQSxRQUFRLENBQUMsZ0JBQVQsQ0FBMEIsT0FBMUIsRUFBbUMsUUFBQSxDQUFDLENBQUQsQ0FBQTtTQUNsQyxPQUFPLENBQUMsTUFBUixDQUFlLENBQUMsQ0FBQyxHQUFHLENBQUMsV0FBTixDQUFBLENBQWY7QUFEa0MsQ0FBbkM7O0FBR0EsS0FBQSxDQUFNLEtBQU4sRUFDQyxHQUFBLENBQUk7RUFBQyxLQUFBLEVBQU07QUFBUCxDQUFKLEVBQ0MsT0FBTyxDQUFDLE1BQVIsQ0FBQSxDQURELEVBRUMsT0FBTyxDQUFDLE1BQVIsQ0FBQSxDQUZELENBREQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtb3VudCwgc2lnbmFsLCBidXR0b24sIGRpdiwgc3BhbiwgdGFibGUsIHRyLCB0ZCB9IGZyb20gXCJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvc2lnbWVudGpzL3NpZ21lbnQtbmdAMS4zLjQvZGlzdC9pbmRleC5qc1wiXHJcbmltcG9ydCBfIGZyb20gXCJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xvZGFzaC1lc0A0LjE3LjIxL2xvZGFzaC5qc1wiXHJcblxyXG5OID0gOFxyXG5cclxuRCA9IFtbIDEsIDJdLCBbIDIsIDFdLCBbIDIsLTFdLCBbIDEsLTJdLCBbLTEsIDJdLCBbLTIsIDFdLCBbLTIsLTFdLCBbLTEsLTJdXVxyXG5cclxuZWNobyA9IGNvbnNvbGUubG9nXHJcbnJhbmdlID0gXy5yYW5nZVxyXG5cclxuY2xhc3MgUGxheWVyXHJcblxyXG5cdGNvbnN0cnVjdG9yOiAoY3VyciwgQGxldHRlcnMpIC0+XHJcblx0XHRbQGN1cnIsIEBzZXRDdXJyXSA9IHNpZ25hbCBjdXJyXHJcblx0XHRbQGJvYXJkLEBzZXRCb2FyZF0gPSBzaWduYWwgQHJib2FyZCgpXHJcblx0XHRAaGlzdG9yeSA9IFtAY3VycigpXSBcclxuXHJcblx0bGV0dGVyIDogKGksIGopIC0+XHJcblx0XHRpZiBfLmlzRXF1YWwgW2ksal0sIEBjdXJyKCkgdGhlbiByZXR1cm4ga2V5eCBAY3VycigpXHJcblx0XHRpZiBfLmlzRXF1YWwgW2ksal0sIHRhcmdldCB0aGVuIHJldHVybiBrZXl4IHRhcmdldFxyXG5cdFx0Zm9yIGlkeCBpbiByYW5nZSBELmxlbmd0aFxyXG5cdFx0XHRbZHgsIGR5XSA9IERbaWR4XVxyXG5cdFx0XHRbeCx5XSA9IEBjdXJyKClcclxuXHRcdFx0aWYgXy5pc0VxdWFsIFtpLGpdLCBbeCArIGR4LCB5ICsgZHldIHRoZW4gcmV0dXJuIEBsZXR0ZXJzW2lkeF1cclxuXHRcdFwiXCJcclxuXHJcblx0cmJvYXJkIDogLT5cclxuXHRcdHRhYmxlIHtzdHlsZTpcInRleHQtYWxpZ246Y2VudGVyO1wifSxcclxuXHRcdFx0Zm9yIGogaW4gcmFuZ2UgTi0xLC0xLC0xXHJcblx0XHRcdFx0dHIge30sXHJcblx0XHRcdFx0XHR0ZCB7c3R5bGU6XCJ0ZXh0LWFsaWduOmNlbnRlcjtcIn0sIFwiI3soaiArIDEpICUgMTB9XCJcclxuXHRcdFx0XHRcdGZvciBpIGluIHJhbmdlIE5cclxuXHRcdFx0XHRcdFx0YmFzZSA9IGlmIChpICsgaikgJSAyID09IDAgdGhlbiBcIiNiNTg4NjNcIiBlbHNlIFwiI2YwZDliNVwiXHJcblx0XHRcdFx0XHRcdHN0eWxlID1cclxuXHRcdFx0XHRcdFx0XHRpZiBfLmlzRXF1YWwgW2ksal0sIEBjdXJyKCkgdGhlbiBcImJhY2tncm91bmQ6cmVkOyBjb2xvcjp3aGl0ZTsgdGV4dC1hbGlnbjpjZW50ZXI7XCJcclxuXHRcdFx0XHRcdFx0XHRlbHNlIGlmIF8uaXNFcXVhbCBbaSxqXSwgdGFyZ2V0IHRoZW4gXCJiYWNrZ3JvdW5kOmdyZWVuOyBjb2xvcjp3aGl0ZTsgdGV4dC1hbGlnbjpjZW50ZXI7XCJcclxuXHRcdFx0XHRcdFx0XHRlbHNlIFwiYmFja2dyb3VuZDoje2Jhc2V9OyB0ZXh0LWFsaWduOmNlbnRlcjtcIlxyXG5cdFx0XHRcdFx0XHR0ZCB7c3R5bGV9LCBAbGV0dGVyIGksalxyXG5cdFx0XHR0ciB7fSxcclxuXHRcdFx0XHRmb3IgaSBpbiByYW5nZSBOKzFcclxuXHRcdFx0XHRcdHRkIHtzdHlsZTpcInRleHQtYWxpZ246Y2VudGVyO1wifSwgXCIgYWJjZGVmZ2hcIltpXVxyXG5cclxuXHR1cGRhdGUgOiAoaWR4KSAtPlxyXG5cdFx0W2R4LCBkeV0gPSBEW2lkeF1cclxuXHRcdFt4LHldID0gQGN1cnIoKVxyXG5cdFx0eGR4ID0geCArIGR4XHJcblx0XHR5ZHkgPSB5ICsgZHlcclxuXHJcblx0XHRpZiAwIDw9IHhkeCA8IE4gYW5kIDAgPD0geWR5IDwgTlxyXG5cdFx0XHRAaGlzdG9yeS5wdXNoIEBjdXJyKClcclxuXHRcdFx0QHNldEN1cnIgW3hkeCwgeWR5XVxyXG5cdFx0XHRAc2V0Qm9hcmQgQHJib2FyZCgpXHJcblxyXG5cdHVuZG8gOiAoKSAtPlxyXG5cdFx0aWYgQGhpc3RvcnkubGVuZ3RoID09IDAgdGhlbiByZXR1cm5cclxuXHRcdEBzZXRDdXJyIEBoaXN0b3J5LnBvcCgpXHJcblx0XHRAc2V0Qm9hcmQgQHJib2FyZCgpXHJcblx0XHRcclxuXHRyZW5kZXIgOiAtPlxyXG5cdFx0ZGl2IHt9LFxyXG5cdFx0XHRAYm9hcmQgIyBzaWduYWwga3LDpHZlciBlbiBmdW5rdGlvblxyXG5cdFx0XHRkaXYge30sXHJcblx0XHRcdFx0ZGl2IHt9LCA9PiBrZXl4KEBjdXJyKCkpICsgXCIgdG8gXCIgKyBrZXl4KHRhcmdldCkgIyBzaWduYWwga3LDpHZlciBlbiBmdW5rdGlvbiBtZWQgPVxyXG5cclxua2V5eCA9IChbeCx5XSkgLT4gXCJhYmNkZWZnaFwiW3hdICsgXCIxMjM0NTY3OFwiW3ldXHJcblxyXG5jcmVhdGVQcm9ibGVtID0gKGxldmVsKSAtPlxyXG5cclxuXHRmaW5kU29sdXRpb24gPSAtPlxyXG5cdFx0ZWNobyAnZmluZFNvbHV0aW9uJyx0YXJnZXRcclxuXHRcdHBhdGggPSBbXSBcclxuXHRcdGN1cnIgPSBrZXl4IHRhcmdldFxyXG5cdFx0d2hpbGUgY3VyciAhPSAnc3RhcnQnXHJcblx0XHRcdHBhdGgucHVzaCBjdXJyXHJcblx0XHRcdGN1cnIgPSByZWFjaGVkW2N1cnJdXHJcblx0XHRwYXRoLnJldmVyc2UoKVxyXG5cdFx0cGF0aC5qb2luICcgJ1xyXG5cclxuXHRzdGFydCA9IFtfLnJhbmRvbSgwLE4tMSksIF8ucmFuZG9tKDAsTi0xKV1cclxuXHRyZWFjaGVkID0ge31cclxuXHRyZWFjaGVkW2tleXggc3RhcnRdID0gJ3N0YXJ0J1xyXG5cdGZyb250MCA9IFtzdGFydF1cclxuXHR3aGlsZSBsZXZlbCA+IDBcclxuXHRcdGxldmVsID0gbGV2ZWwgLSAxXHJcblx0XHRmcm9udDEgPSBbXVxyXG5cdFx0Zm9yIFt4MCx5MF0gaW4gZnJvbnQwXHJcblx0XHRcdGZvciBrZXkgb2YgRFxyXG5cdFx0XHRcdFtkeCwgZHldID0gRFtrZXldXHJcblx0XHRcdFx0W3gsIHldID0gW3gwICsgZHgsIHkwICsgZHldXHJcblx0XHRcdFx0aWYgMCA8PSB4IDwgTiBhbmQgMCA8PSB5IDwgTiBhbmQgbm90IHJlYWNoZWRba2V5eCBbeCx5XV1cclxuXHRcdFx0XHRcdHJlYWNoZWRba2V5eCBbeCx5XV0gPSBrZXl4IFt4MCx5MF1cclxuXHRcdFx0XHRcdGZyb250MS5wdXNoIFt4LHldXHJcblx0XHRpZiBmcm9udDEubGVuZ3RoID09IDBcclxuXHRcdFx0dGFyZ2V0ID0gXy5zYW1wbGUgZnJvbnQwXHJcblx0XHRcdHJldHVybiBbc3RhcnQsIHRhcmdldCwgZmluZFNvbHV0aW9uKCldXHJcblx0XHRlbHNlIGZyb250MCA9IGZyb250MVxyXG5cdFx0dGFyZ2V0ID0gXy5zYW1wbGUgZnJvbnQxXHJcblx0IyBlY2hvIHJlYWNoZWRcclxuXHRbc3RhcnQsIHRhcmdldCwgZmluZFNvbHV0aW9uKCldXHJcblxyXG50MCA9IHBlcmZvcm1hbmNlLm5vdygpXHJcbltzdGFydCx0YXJnZXQsc29sdXRpb25dID0gY3JlYXRlUHJvYmxlbSA0XHJcbnQxID0gcGVyZm9ybWFuY2Uubm93KClcclxuZWNobyBcInNvbHV0aW9uOlwiLCBzb2x1dGlvblxyXG5cclxucGVyZm9ybWFuY2Uubm93KClcclxuZWNobyAncHJvYmxlbSBjcmVhdGVkIGluJywgKHQxIC0gdDApLCAncydcclxuZWNobyBcIiN7a2V5eChzdGFydCl9IHRvICN7a2V5eCh0YXJnZXQpfVwiXHJcbnBsYXllcjEgPSBuZXcgUGxheWVyIHN0YXJ0LCBcIlFXUlRBU0RGXCJcclxucGxheWVyMiA9IG5ldyBQbGF5ZXIgc3RhcnQsIFwiWVVPUEhKS0xcIlxyXG5cclxucHJlc3NlZCA9IG5ldyBTZXQoKVxyXG5wbGF5ZXJzID0gW3BsYXllcjEsIHBsYXllcjJdXHJcbnVuZG9NYXAgPSBuZXcgTWFwIFtcclxuXHRbJ2UnLCBwbGF5ZXIxXVxyXG5cdFsnaScsIHBsYXllcjJdXHJcbl1cclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgJ2tleWRvd24nLCAoZSkgLT5cclxuXHRrZXkgPSBlLmtleS50b0xvd2VyQ2FzZSgpXHJcblx0cmV0dXJuIGlmIHByZXNzZWQuaGFzIGtleVxyXG5cdHByZXNzZWQuYWRkIGtleVxyXG5cdGlmIHVuZG9NYXAuaGFzIGtleVxyXG5cdFx0dW5kb01hcC5nZXQoa2V5KS51bmRvKClcclxuXHRcdHJldHVyblxyXG5cdGZvciBwbGF5ZXIgaW4gcGxheWVyc1xyXG5cdFx0aWR4ID0gcGxheWVyLmxldHRlcnMudG9Mb3dlckNhc2UoKS5pbmRleE9mIGtleVxyXG5cdFx0aWYgaWR4ICE9IC0xXHJcblx0XHRcdHBsYXllci51cGRhdGUgaWR4XHJcblx0XHRcdHJldHVyblxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAna2V5dXAnLCAoZSkgLT5cclxuXHRwcmVzc2VkLmRlbGV0ZSBlLmtleS50b0xvd2VyQ2FzZSgpXHJcbiAgXHJcbm1vdW50IFwiYXBwXCIsIFxyXG5cdGRpdiB7c3R5bGU6XCJkaXNwbGF5OmZsZXg7IGdhcDoyMHB4O1wifSxcclxuXHRcdHBsYXllcjEucmVuZGVyKClcclxuXHRcdHBsYXllcjIucmVuZGVyKClcclxuIl19
//# sourceURL=c:\github\2026\005-shortcut2D\sketch.coffee