// Generated by CoffeeScript 2.7.0
var D, N, Player, echo, player1, player2, range;

import {
  mount,
  signal,
  button,
  div,
  span,
  table,
  tr,
  td
} from "https://cdn.jsdelivr.net/gh/sigmentjs/sigment-ng@1.3.4/dist/index.js";

import _ from "https://cdn.jsdelivr.net/npm/lodash-es@4.17.21/lodash.js";

N = 8;

D = {
  A: [1, 2],
  B: [2, 1],
  C: [2, -1],
  D: [1, -2],
  E: [-1, 2],
  F: [-2, 1],
  G: [-2, -1],
  H: [-1, -2]
};

echo = console.log;

range = _.range;

Player = class Player {
  constructor(id) {
    this.id = id;
    [this.x, this.setX] = signal(0); // a1
    [this.y, this.setY] = signal(0);
    [this.board, this.setBoard] = signal(this.rboard());
    this.history = [[this.x(), this.y()]];
  }

  rboard() {
    var i, j;
    return table({}, (function() {
      var k, len, ref, results;
      ref = range(N - 1, -1, -1);
      results = [];
      for (k = 0, len = ref.length; k < len; k++) {
        j = ref[k];
        results.push(tr({}, (function() {
          var l, len1, ref1, results1;
          ref1 = range(N);
          results1 = [];
          for (l = 0, len1 = ref1.length; l < len1; l++) {
            i = ref1[l];
            results1.push(td({}, _.isEqual([i, j], [this.x(), this.y()]) ? "X" : "•"));
          }
          return results1;
        }).call(this)));
      }
      return results;
    }).call(this));
  }

  update(letter) {
    var dx, dy, xdx, ydy;
    [dx, dy] = D[letter];
    xdx = this.x() + dx;
    ydy = this.y() + dy;
    if ((0 <= xdx && xdx < N) && (0 <= ydy && ydy < N)) {
      this.history.push([this.x(), this.y()]);
      this.setX(xdx);
      this.setY(ydy);
      return this.setBoard(this.rboard());
    }
  }

  undo() {
    var x, y;
    if (this.history.length === 0) {
      return;
    }
    [x, y] = this.history.pop();
    this.setX(x);
    this.setY(y);
    return this.setBoard(this.rboard());
  }

  render() {
    var letter;
    return div({}, this.board, div({}, div({}, () => { // automatiskt anrop
      return this.x() + 1; // div kräver en funktion med =
    }), div({}, () => {
      return this.y() + 1;
    }), (function() {
      var k, len, ref, results;
      ref = "ABCDEFGH";
      results = [];
      for (k = 0, len = ref.length; k < len; k++) {
        letter = ref[k];
        results.push(((letter) => {
          return button({
            onclick: () => {
              return this.update(letter);
            }
          }, () => {
            return letter;
          });
        })(letter));
      }
      return results;
    }).call(this), " ", button({
      onclick: () => {
        return this.undo();
      }
    }, "undo")));
  }

};

player1 = new Player(1);

player2 = new Player(2);

mount("app", div({
  style: "display:flex; gap:20px;"
}, player1.render(), player2.render()));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2tldGNoLmpzIiwic291cmNlUm9vdCI6IlxcIiwic291cmNlcyI6WyJza2V0Y2guY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsTUFBQSxFQUFBLElBQUEsRUFBQSxPQUFBLEVBQUEsT0FBQSxFQUFBOztBQUFBLE9BQUE7RUFBUyxLQUFUO0VBQWdCLE1BQWhCO0VBQXdCLE1BQXhCO0VBQWdDLEdBQWhDO0VBQXFDLElBQXJDO0VBQTJDLEtBQTNDO0VBQWtELEVBQWxEO0VBQXNELEVBQXREO0NBQUEsTUFBQTs7QUFDQSxPQUFPLENBQVAsTUFBQTs7QUFFQSxDQUFBLEdBQUk7O0FBRUosQ0FBQSxHQUFJO0VBQUUsQ0FBQSxFQUFHLENBQUUsQ0FBRixFQUFLLENBQUwsQ0FBTDtFQUFjLENBQUEsRUFBRSxDQUFFLENBQUYsRUFBSyxDQUFMLENBQWhCO0VBQXlCLENBQUEsRUFBRSxDQUFFLENBQUYsRUFBSSxDQUFDLENBQUwsQ0FBM0I7RUFBb0MsQ0FBQSxFQUFFLENBQUUsQ0FBRixFQUFJLENBQUMsQ0FBTCxDQUF0QztFQUErQyxDQUFBLEVBQUUsQ0FBQyxDQUFDLENBQUYsRUFBSyxDQUFMLENBQWpEO0VBQTBELENBQUEsRUFBRSxDQUFDLENBQUMsQ0FBRixFQUFLLENBQUwsQ0FBNUQ7RUFBcUUsQ0FBQSxFQUFFLENBQUMsQ0FBQyxDQUFGLEVBQUksQ0FBQyxDQUFMLENBQXZFO0VBQWdGLENBQUEsRUFBRSxDQUFDLENBQUMsQ0FBRixFQUFJLENBQUMsQ0FBTDtBQUFsRjs7QUFFSixJQUFBLEdBQU8sT0FBTyxDQUFDOztBQUNmLEtBQUEsR0FBUSxDQUFDLENBQUM7O0FBRUosU0FBTixNQUFBLE9BQUE7RUFFQyxXQUFhLEdBQUEsQ0FBQTtJQUFDLElBQUMsQ0FBQTtJQUNkLENBQUMsSUFBQyxDQUFBLENBQUYsRUFBSyxJQUFDLENBQUEsSUFBTixDQUFBLEdBQWMsTUFBQSxDQUFPLENBQVAsRUFBaEI7SUFD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QUFZLE1BQUEsQ0FBTztZQUFFLE9BQUEsRUFBUyxDQUFBLENBQUEsR0FBQTtxQkFBRyxJQUFDLENBQUEsTUFBRCxDQUFRLE1BQVI7WUFBSDtVQUFYLENBQVAsRUFBc0MsQ0FBQSxDQUFBLEdBQUE7bUJBQUc7VUFBSCxDQUF0QztRQUFaLENBQUEsRUFBQztNQURMLENBQUE7O2lCQUhELEVBS0MsR0FMRCxFQU1DLE1BQUEsQ0FBTztNQUFFLE9BQUEsRUFBUyxDQUFBLENBQUEsR0FBQTtlQUFHLElBQUMsQ0FBQSxJQUFELENBQUE7TUFBSDtJQUFYLENBQVAsRUFBZ0MsTUFBaEMsQ0FORCxDQUZEO0VBRFE7O0FBakNWOztBQTRDQSxPQUFBLEdBQVUsSUFBSSxNQUFKLENBQVcsQ0FBWDs7QUFDVixPQUFBLEdBQVUsSUFBSSxNQUFKLENBQVcsQ0FBWDs7QUFFVixLQUFBLENBQU0sS0FBTixFQUNDLEdBQUEsQ0FBSTtFQUFDLEtBQUEsRUFBTTtBQUFQLENBQUosRUFDQyxPQUFPLENBQUMsTUFBUixDQUFBLENBREQsRUFFQyxPQUFPLENBQUMsTUFBUixDQUFBLENBRkQsQ0FERCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG1vdW50LCBzaWduYWwsIGJ1dHRvbiwgZGl2LCBzcGFuLCB0YWJsZSwgdHIsIHRkIH0gZnJvbSBcImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9zaWdtZW50anMvc2lnbWVudC1uZ0AxLjMuNC9kaXN0L2luZGV4LmpzXCJcclxuaW1wb3J0IF8gZnJvbSBcImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vbG9kYXNoLWVzQDQuMTcuMjEvbG9kYXNoLmpzXCJcclxuXHJcbk4gPSA4XHJcblxyXG5EID0geyBBOiBbIDEsIDJdLCBCOlsgMiwgMV0sIEM6WyAyLC0xXSwgRDpbIDEsLTJdLCBFOlstMSwgMl0sIEY6Wy0yLCAxXSwgRzpbLTIsLTFdLCBIOlstMSwtMl19XHJcblxyXG5lY2hvID0gY29uc29sZS5sb2cgXHJcbnJhbmdlID0gXy5yYW5nZVxyXG5cclxuY2xhc3MgUGxheWVyXHJcblxyXG5cdGNvbnN0cnVjdG9yOiAoQGlkKSAtPlxyXG5cdFx0W0B4LCBAc2V0WF0gPSBzaWduYWwgMCAjIGExXHJcblx0XHRbQHksIEBzZXRZXSA9IHNpZ25hbCAwXHJcblx0XHRbQGJvYXJkLEBzZXRCb2FyZF0gPSBzaWduYWwgQHJib2FyZCgpXHJcblx0XHRAaGlzdG9yeSA9IFtbQHgoKSxAeSgpXV0gXHJcblxyXG5cdHJib2FyZCA6IC0+XHJcblx0XHR0YWJsZSB7fSxcclxuXHRcdFx0Zm9yIGogaW4gcmFuZ2UgTi0xLC0xLC0xXHJcblx0XHRcdFx0dHIge30sXHJcblx0XHRcdFx0XHRmb3IgaSBpbiByYW5nZSBOXHJcblx0XHRcdFx0XHRcdHRkIHt9LCBpZiBfLmlzRXF1YWwgW2ksal0sIFtAeCgpLEB5KCldIHRoZW4gXCJYXCIgZWxzZSBcIuKAolwiXHJcblxyXG5cdHVwZGF0ZSA6IChsZXR0ZXIpIC0+XHJcblx0XHRbZHgsIGR5XSA9IERbbGV0dGVyXVxyXG5cdFx0eGR4ID0gQHgoKSArIGR4XHJcblx0XHR5ZHkgPSBAeSgpICsgZHlcclxuXHJcblx0XHRpZiAwIDw9IHhkeCA8IE4gYW5kIDAgPD0geWR5IDwgTlxyXG5cdFx0XHRAaGlzdG9yeS5wdXNoIFtAeCgpLCBAeSgpXVxyXG5cdFx0XHRAc2V0WCB4ZHhcclxuXHRcdFx0QHNldFkgeWR5XHJcblx0XHRcdEBzZXRCb2FyZCBAcmJvYXJkKClcclxuXHJcblx0dW5kbyA6ICgpIC0+XHJcblx0XHRpZiBAaGlzdG9yeS5sZW5ndGggPT0gMCB0aGVuIHJldHVyblxyXG5cdFx0W3gseV0gPSBAaGlzdG9yeS5wb3AoKVxyXG5cdFx0QHNldFggeFxyXG5cdFx0QHNldFkgeVxyXG5cdFx0QHNldEJvYXJkIEByYm9hcmQoKVxyXG5cdFx0XHJcblx0cmVuZGVyIDogLT5cclxuXHRcdGRpdiB7fSxcclxuXHRcdFx0QGJvYXJkICMgYXV0b21hdGlza3QgYW5yb3BcclxuXHRcdFx0ZGl2IHt9LFxyXG5cdFx0XHRcdGRpdiB7fSwgPT4gQHgoKSArIDEgIyBkaXYga3LDpHZlciBlbiBmdW5rdGlvbiBtZWQgPVxyXG5cdFx0XHRcdGRpdiB7fSwgPT4gQHkoKSArIDFcclxuXHRcdFx0XHRmb3IgbGV0dGVyIGluIFwiQUJDREVGR0hcIlxyXG5cdFx0XHRcdFx0ZG8gKGxldHRlcikgPT4gYnV0dG9uIHsgb25jbGljazogPT4gQHVwZGF0ZSBsZXR0ZXJ9LCA9PiBsZXR0ZXJcclxuXHRcdFx0XHRcIiBcIlxyXG5cdFx0XHRcdGJ1dHRvbiB7IG9uY2xpY2s6ID0+IEB1bmRvKCkgfSwgXCJ1bmRvXCJcclxuXHJcbnBsYXllcjEgPSBuZXcgUGxheWVyIDFcclxucGxheWVyMiA9IG5ldyBQbGF5ZXIgMlxyXG4gIFxyXG5tb3VudCBcImFwcFwiLCBcclxuXHRkaXYge3N0eWxlOlwiZGlzcGxheTpmbGV4OyBnYXA6MjBweDtcIn0sXHJcblx0XHRwbGF5ZXIxLnJlbmRlcigpXHJcblx0XHRwbGF5ZXIyLnJlbmRlcigpXHJcbiJdfQ==
//# sourceURL=c:\github\2026\005-shortcut2D\sketch.coffee