// Generated by CoffeeScript 2.7.0
import _ from "https://cdn.jsdelivr.net/npm/lodash-es@4.17.21/lodash.js";

export var range = _.range;

export var echo = console.log;

export var Game = class Game {
  constructor() {
    this.stack = [];
    this.showResults = false;
    this.pressed = new Set();
  }

  gauss(z) { // visar komplexa tal
    var abs_im, im, im_part, re, sign;
    [re, im] = z;
    if (re === 0 && im === 0) {
      return "0";
    }
    if (re === 0) {
      if (im === 1) {
        return "i";
      }
      if (im === -1) {
        return "-i";
      }
      return `${im}i`;
    }
    if (im === 0) {
      return `${re}`;
    }
    sign = im > 0 ? '+' : "-";
    abs_im = im < 0 ? -im : im; // |im|
    im_part = abs_im === 1 ? 'i' : `${abs_im}i`;
    return `${re}${sign}${im_part}`;
  }

  found(item, lst) {
    return _.some(lst, function(x) {
      return _.isEqual(x, item);
    });
  }

  calc(s, x, y) {
    var a, b, j, len, n, op, stack;
    stack = this.stack;
    for (j = 0, len = s.length; j < len; j++) {
      op = s[j];
      if (op === 'x') {
        stack.push(x);
      }
      if (op === 'y') {
        stack.push(y);
      }
      if (op === '1') {
        stack.push(1);
      }
      if (op === '2') {
        stack.push(2);
      }
      if (op === '+') {
        stack.push(stack.pop() + stack.pop());
      }
      if (op === '-') {
        b = stack.pop();
        a = stack.pop();
        stack.push(a - b);
      }
      if (op === '*') {
        stack.push(stack.pop() * stack.pop());
      }
      if (op === '/') {
        n = stack.length;
        a = stack[n - 2];
        b = stack[n - 1];
        if (a % b !== 0) {
          return null;
        }
        stack.pop();
        stack.pop();
        stack.push(Math.floor(a / b));
      }
      if (op === 'c') {
        stack.push(-stack.pop());
      }
    }
    return stack.pop();
  }

  createProblem() {
    var cand, curr, front0, front1, i, j, k, key, l, len, len1, len2, op, ops, path, pos, ref, res, temp, visited;
    pos = this.createStart();
    visited = [pos];
    front1 = [pos];
    path = {};
    ref = range(this.level + 1);
    for (j = 0, len = ref.length; j < len; j++) {
      i = ref[j];
      ops = _.clone(this.ops);
      if (front1.length === 0) {
        break;
      }
      front0 = _.clone(front1);
      front1 = [];
      for (k = 0, len1 = front0.length; k < len1; k++) {
        cand = front0[k];
        for (l = 0, len2 = ops.length; l < len2; l++) {
          op = ops[l];
          temp = this.operation(op, cand);
          if (this.ok(temp) && !this.found(temp, visited)) {
            key = this.pretty(temp);
            path[key] = cand;
            front1.push(temp);
            visited.push(temp);
          }
        }
      }
    }
    curr = _.sample(front0);
    res = [];
    while (curr !== null) {
      res.unshift(curr);
      key = this.pretty(curr);
      if (!(key in path)) {
        break;
      }
      curr = path[key];
    }
    return res;
  }

  startLevel(level) {
    this.level = Math.max(1, level);
    echo(this.level);
    this.solution = this.createProblem(this.level);
    echo(this.solution);
    this.showResults = false;
    this.player1.reset();
    this.player2.reset();
    this.pressed.clear();
    return this.solution;
  }

};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2FtZS5qcyIsInNvdXJjZVJvb3QiOiJcXCIsInNvdXJjZXMiOlsiZ2FtZS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sQ0FBUCxNQUFBOztBQUVBLE9BQUEsSUFBTyxLQUFBLEdBQVEsQ0FBQyxDQUFDOztBQUNqQixPQUFBLElBQU8sSUFBQSxHQUFPLE9BQU8sQ0FBQzs7QUFFdEIsT0FBQSxJQUFhLE9BQU4sTUFBQSxLQUFBO0VBQ04sV0FBYyxDQUFBLENBQUE7SUFDYixJQUFDLENBQUEsS0FBRCxHQUFTO0lBQ1QsSUFBQyxDQUFBLFdBQUQsR0FBZTtJQUNmLElBQUMsQ0FBQSxPQUFELEdBQVcsSUFBSSxHQUFKLENBQUE7RUFIRTs7RUFLZCxLQUFRLENBQUMsQ0FBRCxDQUFBLEVBQUE7QUFDVCxRQUFBLE1BQUEsRUFBQSxFQUFBLEVBQUEsT0FBQSxFQUFBLEVBQUEsRUFBQTtJQUFFLENBQUMsRUFBRCxFQUFLLEVBQUwsQ0FBQSxHQUFXO0lBQ1gsSUFBRyxFQUFBLEtBQU0sQ0FBTixJQUFZLEVBQUEsS0FBTSxDQUFyQjtBQUE0QixhQUFPLElBQW5DOztJQUNBLElBQUcsRUFBQSxLQUFNLENBQVQ7TUFDQyxJQUFHLEVBQUEsS0FBTSxDQUFUO0FBQWdCLGVBQU8sSUFBdkI7O01BQ0EsSUFBRyxFQUFBLEtBQU0sQ0FBQyxDQUFWO0FBQWlCLGVBQU8sS0FBeEI7O0FBQ0EsYUFBTyxDQUFBLENBQUEsQ0FBRyxFQUFILENBQUEsQ0FBQSxFQUhSOztJQUtBLElBQUcsRUFBQSxLQUFNLENBQVQ7QUFBZ0IsYUFBTyxDQUFBLENBQUEsQ0FBRyxFQUFILENBQUEsRUFBdkI7O0lBQ0EsSUFBQSxHQUFVLEVBQUEsR0FBSyxDQUFSLEdBQWUsR0FBZixHQUF3QjtJQUMvQixNQUFBLEdBQVksRUFBQSxHQUFLLENBQVIsR0FBZSxDQUFDLEVBQWhCLEdBQXdCLEdBVG5DO0lBVUUsT0FBQSxHQUFhLE1BQUEsS0FBVSxDQUFiLEdBQW9CLEdBQXBCLEdBQTZC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QSxRQUFOO0lBQ0EsSUFBQyxDQUFBLFdBQUQsR0FBZTtJQUNmLElBQUMsQ0FBQSxPQUFPLENBQUMsS0FBVCxDQUFBO0lBQ0EsSUFBQyxDQUFBLE9BQU8sQ0FBQyxLQUFULENBQUE7SUFDQSxJQUFDLENBQUEsT0FBTyxDQUFDLEtBQVQsQ0FBQTtXQUNBLElBQUMsQ0FBQTtFQVRXOztBQXpFUCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gXCJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL2xvZGFzaC1lc0A0LjE3LjIxL2xvZGFzaC5qc1wiXHJcblxyXG5leHBvcnQgcmFuZ2UgPSBfLnJhbmdlXHJcbmV4cG9ydCBlY2hvID0gY29uc29sZS5sb2dcclxuXHJcbmV4cG9ydCBjbGFzcyBHYW1lXHJcblx0Y29uc3RydWN0b3IgOiAoKSAtPlxyXG5cdFx0QHN0YWNrID0gW11cclxuXHRcdEBzaG93UmVzdWx0cyA9IGZhbHNlXHJcblx0XHRAcHJlc3NlZCA9IG5ldyBTZXQoKVxyXG5cclxuXHRnYXVzcyA6ICh6KSAtPiAjIHZpc2FyIGtvbXBsZXhhIHRhbFxyXG5cdFx0W3JlLCBpbV0gPSB6XHJcblx0XHRpZiByZSA9PSAwIGFuZCBpbSA9PSAwIHRoZW4gcmV0dXJuIFwiMFwiXHJcblx0XHRpZiByZSA9PSAwXHJcblx0XHRcdGlmIGltID09IDEgdGhlbiByZXR1cm4gXCJpXCJcclxuXHRcdFx0aWYgaW0gPT0gLTEgdGhlbiByZXR1cm4gXCItaVwiXHJcblx0XHRcdHJldHVybiBcIiN7aW19aVwiXHJcblxyXG5cdFx0aWYgaW0gPT0gMCB0aGVuIHJldHVybiBcIiN7cmV9XCJcclxuXHRcdHNpZ24gPSBpZiBpbSA+IDAgdGhlbiAnKycgZWxzZSBcIi1cIlxyXG5cdFx0YWJzX2ltID0gaWYgaW0gPCAwIHRoZW4gLWltIGVsc2UgaW0gICMgfGltfFxyXG5cdFx0aW1fcGFydCA9IGlmIGFic19pbSA9PSAxIHRoZW4gJ2knIGVsc2UgXCIje2Fic19pbX1pXCJcclxuXHRcdFwiI3tyZX0je3NpZ259I3tpbV9wYXJ0fVwiXHJcblxyXG5cdGZvdW5kIDogKGl0ZW0sIGxzdCkgLT4gXy5zb21lIGxzdCwgKHgpIC0+IF8uaXNFcXVhbCB4LCBpdGVtXHJcblxyXG5cdGNhbGMgOiAocyx4LHkpIC0+XHJcblx0XHRzdGFjayA9IEBzdGFja1xyXG5cdFx0Zm9yIG9wIGluIHNcclxuXHRcdFx0aWYgb3A9PSd4JyB0aGVuIHN0YWNrLnB1c2goeClcclxuXHRcdFx0aWYgb3A9PSd5JyB0aGVuIHN0YWNrLnB1c2goeSlcclxuXHRcdFx0aWYgb3A9PScxJyB0aGVuIHN0YWNrLnB1c2goMSlcclxuXHRcdFx0aWYgb3A9PScyJ3RoZW4gc3RhY2sucHVzaCgyKVxyXG5cdFx0XHRpZiBvcD09JysnIHRoZW4gc3RhY2sucHVzaChzdGFjay5wb3AoKSArIHN0YWNrLnBvcCgpKVxyXG5cdFx0XHRpZiBvcD09Jy0nXHJcblx0XHRcdFx0YiA9IHN0YWNrLnBvcCgpXHJcblx0XHRcdFx0YSA9IHN0YWNrLnBvcCgpXHJcblx0XHRcdFx0c3RhY2sucHVzaChhIC0gYilcclxuXHRcdFx0aWYgb3A9PScqJyB0aGVuIHN0YWNrLnB1c2goc3RhY2sucG9wKCkgKiBzdGFjay5wb3AoKSlcclxuXHRcdFx0aWYgb3A9PScvJ1xyXG5cdFx0XHRcdG4gPSBzdGFjay5sZW5ndGhcclxuXHRcdFx0XHRhID0gc3RhY2tbbi0yXVxyXG5cdFx0XHRcdGIgPSBzdGFja1tuLTFdXHJcblx0XHRcdFx0aWYgYSAlIGIgIT0gMCB0aGVuIHJldHVybiBudWxsXHJcblx0XHRcdFx0c3RhY2sucG9wKClcclxuXHRcdFx0XHRzdGFjay5wb3AoKVxyXG5cdFx0XHRcdHN0YWNrLnB1c2goYSAvLyBiKVxyXG5cdFx0XHRpZiBvcD09J2MnIHRoZW4gc3RhY2sucHVzaCgtc3RhY2sucG9wKCkpXHJcblx0XHRzdGFjay5wb3AoKVxyXG5cclxuXHRjcmVhdGVQcm9ibGVtIDogLT5cclxuXHRcdHBvcyA9IEBjcmVhdGVTdGFydCgpXHJcblx0XHR2aXNpdGVkID0gW3Bvc11cclxuXHRcdGZyb250MSA9IFtwb3NdXHJcblx0XHRwYXRoID0ge31cclxuXHRcdGZvciBpIGluIHJhbmdlIEBsZXZlbCArIDFcclxuXHRcdFx0b3BzID0gXy5jbG9uZSBAb3BzXHJcblx0XHRcdGlmIGZyb250MS5sZW5ndGggPT0gMCB0aGVuIGJyZWFrXHJcblx0XHRcdGZyb250MCA9IF8uY2xvbmUgZnJvbnQxXHJcblx0XHRcdGZyb250MSA9IFtdXHJcblx0XHRcdGZvciBjYW5kIGluIGZyb250MFxyXG5cdFx0XHRcdGZvciBvcCBpbiBvcHNcclxuXHRcdFx0XHRcdHRlbXAgPSBAb3BlcmF0aW9uIG9wLCBjYW5kXHJcblx0XHRcdFx0XHRpZiBAb2sodGVtcCkgYW5kIG5vdCBAZm91bmQgdGVtcCwgdmlzaXRlZFxyXG5cdFx0XHRcdFx0XHRrZXkgPSBAcHJldHR5IHRlbXBcclxuXHRcdFx0XHRcdFx0cGF0aFtrZXldID0gY2FuZFxyXG5cdFx0XHRcdFx0XHRmcm9udDEucHVzaCB0ZW1wXHJcblx0XHRcdFx0XHRcdHZpc2l0ZWQucHVzaCB0ZW1wXHJcblx0XHRjdXJyID0gXy5zYW1wbGUgZnJvbnQwXHJcblx0XHRyZXMgPSBbXVxyXG5cdFx0d2hpbGUgY3VyciAhPSBudWxsXHJcblx0XHRcdHJlcy51bnNoaWZ0IGN1cnJcclxuXHRcdFx0a2V5ID0gQHByZXR0eSBjdXJyXHJcblx0XHRcdGlmIGtleSBub3Qgb2YgcGF0aCB0aGVuIGJyZWFrXHJcblx0XHRcdGN1cnIgPSBwYXRoW2tleV1cclxuXHRcdHJlc1xyXG5cclxuXHRzdGFydExldmVsIDogKGxldmVsKSAtPlxyXG5cdFx0QGxldmVsID0gTWF0aC5tYXggMSwgbGV2ZWxcclxuXHRcdGVjaG8gQGxldmVsXHJcblx0XHRAc29sdXRpb24gPSBAY3JlYXRlUHJvYmxlbSBAbGV2ZWxcclxuXHRcdGVjaG8gQHNvbHV0aW9uXHJcblx0XHRAc2hvd1Jlc3VsdHMgPSBmYWxzZVxyXG5cdFx0QHBsYXllcjEucmVzZXQoKVxyXG5cdFx0QHBsYXllcjIucmVzZXQoKVxyXG5cdFx0QHByZXNzZWQuY2xlYXIoKVxyXG5cdFx0QHNvbHV0aW9uXHJcbiJdfQ==
//# sourceURL=c:\github\2026\005-shortcut2D\game.coffee