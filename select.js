// Generated by CoffeeScript 2.7.0
var NAME_LEN, NBSP, div, formatName, toSortKey;

import {
  tag
} from '../fasthtml.js';

div = tag("div");

NAME_LEN = 21;

NBSP = "\u00A0";

formatName = function(name) {
  var out;
  out = name != null ? name : "";
  if (out.length > NAME_LEN) {
    out = out.slice(0, NAME_LEN);
  }
  out = out.padEnd(NAME_LEN, ' ');
  return out.replaceAll(" ", NBSP);
};

toSortKey = function(name) {
  var out;
  out = name != null ? name : "";
  if (out.length > NAME_LEN) {
    out = out.slice(0, NAME_LEN);
  }
  return out.trim().toLocaleLowerCase('sv-SE');
};

export var Select = class Select {
  constructor({items = [], onCountChange = null} = {}) {
    var j, len, name;
    this.onKeydown = this.onKeydown.bind(this);
    this.onCountChange = onCountChange;
    this.selectedIndex = -1;
    this.element = div({
      tabindex: "0",
      style: "font-family:monospace; font-size:14px; width:360px; height:360px; overflow-y:auto; border:1px solid #999; white-space:pre;"
    });
    this.element.addEventListener('keydown', this.onKeydown);
    for (j = 0, len = items.length; j < len; j++) {
      name = items[j];
      this.addPlayer(name);
    }
    this.setSelectedIndex(0);
    this.notifyCount();
  }

  notifyCount() {
    return typeof this.onCountChange === "function" ? this.onCountChange(this.element.children.length) : void 0;
  }

  setSelectedIndex(i) {
    var count, j, len, next, ref, row;
    count = this.element.children.length;
    if (count === 0) {
      this.selectedIndex = -1;
      return;
    }
    next = Math.max(0, Math.min(i, count - 1));
    ref = this.element.children;
    for (j = 0, len = ref.length; j < len; j++) {
      row = ref[j];
      row.style.background = "";
    }
    this.selectedIndex = next;
    row = this.element.children[this.selectedIndex];
    row.style.background = "#cfe8ff";
    return row.scrollIntoView({
      block: "nearest"
    });
  }

  sortPlayers(preferredRow = null) {
    var i, j, len, row, rows;
    rows = Array.prototype.slice.call(this.element.children);
    rows.sort(function(a, b) {
      return a.dataset.sortKey.localeCompare(b.dataset.sortKey, 'sv', {
        sensitivity: 'base'
      });
    });
    for (j = 0, len = rows.length; j < len; j++) {
      row = rows[j];
      this.element.appendChild(row);
    }
    if (rows.length === 0) {
      this.selectedIndex = -1;
      this.notifyCount();
      return;
    }
    if (preferredRow != null) {
      i = rows.indexOf(preferredRow);
      if (i < 0) {
        i = 0;
      }
      this.setSelectedIndex(i);
    } else {
      this.setSelectedIndex(Math.max(0, Math.min(this.selectedIndex, rows.length - 1)));
    }
    return this.notifyCount();
  }

  selectByInitial(char, backwards = false) {
    var i, j, k, l, len, len1, len2, matches, needle, ref, revMatches, row, rows, target;
    rows = Array.prototype.slice.call(this.element.children);
    if (rows.length === 0) {
      return;
    }
    needle = char.toLocaleLowerCase('sv-SE');
    matches = [];
    for (i = j = 0, len = rows.length; j < len; i = ++j) {
      row = rows[i];
      if ((ref = row.dataset.sortKey) != null ? ref.startsWith(needle) : void 0) {
        matches.push(i);
      }
    }
    if (matches.length === 0) {
      return;
    }
    if (backwards) {
      revMatches = matches.slice().reverse();
      target = revMatches[0];
      for (k = 0, len1 = revMatches.length; k < len1; k++) {
        i = revMatches[k];
        if (!(i < this.selectedIndex)) {
          continue;
        }
        target = i;
        break;
      }
    } else {
      target = matches[0];
      for (l = 0, len2 = matches.length; l < len2; l++) {
        i = matches[l];
        if (!(i > this.selectedIndex)) {
          continue;
        }
        target = i;
        break;
      }
    }
    return this.setSelectedIndex(target);
  }

  addPlayer(name, pick = false) {
    var row;
    row = div({
      style: "line-height:18px; padding:0 4px; cursor:default;",
      dataset: {
        sortKey: toSortKey(name)
      }
    }, formatName(name));
    row.addEventListener("click", () => {
      var i;
      i = Array.prototype.indexOf.call(this.element.children, row);
      if (i >= 0) {
        this.setSelectedIndex(i);
        return this.element.focus();
      }
    });
    this.element.appendChild(row);
    return this.sortPlayers(pick ? row : null);
  }

  removeSelected() {
    var count, i;
    count = this.element.children.length;
    if (count === 0) {
      return;
    }
    i = this.selectedIndex >= 0 ? this.selectedIndex : count - 1;
    this.element.removeChild(this.element.children[i]);
    if (this.element.children.length === 0) {
      this.selectedIndex = -1;
      this.notifyCount();
      return;
    }
    this.setSelectedIndex(Math.min(i, this.element.children.length - 1));
    return this.notifyCount();
  }

  clear() {
    this.element.innerHTML = '';
    this.selectedIndex = -1;
    return this.notifyCount();
  }

  focus() {
    return this.element.focus();
  }

  onKeydown(e) {
    if (e.key === 'ArrowUp') {
      e.preventDefault();
      return this.setSelectedIndex(this.selectedIndex - 1);
    } else if (e.key === 'ArrowDown') {
      e.preventDefault();
      return this.setSelectedIndex(this.selectedIndex + 1);
    } else if (e.key.length === 1 && !e.ctrlKey && !e.metaKey && !e.altKey) {
      e.preventDefault();
      return this.selectByInitial(e.key, e.shiftKey);
    }
  }

};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0LmpzIiwic291cmNlUm9vdCI6IlxcIiwic291cmNlcyI6WyJzZWxlY3QuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFBLFFBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLFVBQUEsRUFBQTs7QUFBQSxPQUFBO0VBQVEsR0FBUjtDQUFBLE1BQUE7O0FBRUEsR0FBQSxHQUFNLEdBQUEsQ0FBSSxLQUFKOztBQUVOLFFBQUEsR0FBVzs7QUFDWCxJQUFBLEdBQU87O0FBRVAsVUFBQSxHQUFhLFFBQUEsQ0FBQyxJQUFELENBQUE7QUFDYixNQUFBO0VBQUMsR0FBQSxrQkFBTSxPQUFPO0VBQ2IsSUFBRyxHQUFHLENBQUMsTUFBSixHQUFhLFFBQWhCO0lBQThCLEdBQUEsR0FBTSxHQUFHLENBQUMsS0FBSixDQUFVLENBQVYsRUFBYSxRQUFiLEVBQXBDOztFQUNBLEdBQUEsR0FBTSxHQUFHLENBQUMsTUFBSixDQUFXLFFBQVgsRUFBcUIsR0FBckI7U0FDTixHQUFHLENBQUMsVUFBSixDQUFlLEdBQWYsRUFBb0IsSUFBcEI7QUFKWTs7QUFNYixTQUFBLEdBQVksUUFBQSxDQUFDLElBQUQsQ0FBQTtBQUNaLE1BQUE7RUFBQyxHQUFBLGtCQUFNLE9BQU87RUFDYixJQUFHLEdBQUcsQ0FBQyxNQUFKLEdBQWEsUUFBaEI7SUFBOEIsR0FBQSxHQUFNLEdBQUcsQ0FBQyxLQUFKLENBQVUsQ0FBVixFQUFhLFFBQWIsRUFBcEM7O1NBQ0EsR0FBRyxDQUFDLElBQUosQ0FBQSxDQUFVLENBQUMsaUJBQVgsQ0FBNkIsT0FBN0I7QUFIVzs7QUFLWixPQUFBLElBQWEsU0FBTixNQUFBLE9BQUE7RUFDTixXQUFhLENBQUMsQ0FBQyxLQUFBLEdBQVEsRUFBVCxFQUFhLGFBQUEsR0FBZ0IsSUFBN0IsSUFBcUMsQ0FBQSxDQUF0QyxDQUFBO0FBQ2QsUUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBO1FBa0hDLENBQUEsZ0JBQUEsQ0FBQTtJQWxIQyxJQUFDLENB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QUFrQixJQUFJLENBQUMsR0FBTCxDQUFTLENBQVQsRUFBWSxJQUFDLENBQUEsT0FBTyxDQUFDLFFBQVEsQ0FBQyxNQUFsQixHQUEyQixDQUF2QyxDQUFsQjtXQUNBLElBQUMsQ0FBQSxXQUFELENBQUE7RUFiZTs7RUFlaEIsS0FBTyxDQUFBLENBQUE7SUFDTixJQUFDLENBQUEsT0FBTyxDQUFDLFNBQVQsR0FBcUI7SUFDckIsSUFBQyxDQUFBLGFBQUQsR0FBaUIsQ0FBQztXQUNsQixJQUFDLENBQUEsV0FBRCxDQUFBO0VBSE07O0VBS1AsS0FBTyxDQUFBLENBQUE7V0FDTixJQUFDLENBQUEsT0FBTyxDQUFDLEtBQVQsQ0FBQTtFQURNOztFQUdQLFNBQVcsQ0FBQyxDQUFELENBQUE7SUFDVixJQUFHLENBQUMsQ0FBQyxHQUFGLEtBQVMsU0FBWjtNQUNDLENBQUMsQ0FBQyxjQUFGLENBQUE7YUFDQSxJQUFDLENBQUEsZ0JBQUQsQ0FBa0IsSUFBQyxDQUFBLGFBQUQsR0FBaUIsQ0FBbkMsRUFGRDtLQUFBLE1BR0ssSUFBRyxDQUFDLENBQUMsR0FBRixLQUFTLFdBQVo7TUFDSixDQUFDLENBQUMsY0FBRixDQUFBO2FBQ0EsSUFBQyxDQUFBLGdCQUFELENBQWtCLElBQUMsQ0FBQSxhQUFELEdBQWlCLENBQW5DLEVBRkk7S0FBQSxNQUdBLElBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxNQUFOLEtBQWdCLENBQWhCLElBQXNCLENBQUksQ0FBQyxDQUFDLE9BQTVCLElBQXdDLENBQUksQ0FBQyxDQUFDLE9BQTlDLElBQTBELENBQUksQ0FBQyxDQUFDLE1BQW5FO01BQ0osQ0FBQyxDQUFDLGNBQUYsQ0FBQTthQUNBLElBQUMsQ0FBQSxlQUFELENBQWlCLENBQUMsQ0FBQyxHQUFuQixFQUF3QixDQUFDLENBQUMsUUFBMUIsRUFGSTs7RUFQSzs7QUFwSEwiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge3RhZ30gZnJvbSAnLi4vZmFzdGh0bWwuanMnXHJcblxyXG5kaXYgPSB0YWcgXCJkaXZcIlxyXG5cclxuTkFNRV9MRU4gPSAyMVxyXG5OQlNQID0gXCJcXHUwMEEwXCJcclxuXHJcbmZvcm1hdE5hbWUgPSAobmFtZSkgLT5cclxuXHRvdXQgPSBuYW1lID8gXCJcIlxyXG5cdGlmIG91dC5sZW5ndGggPiBOQU1FX0xFTiB0aGVuIG91dCA9IG91dC5zbGljZSAwLCBOQU1FX0xFTlxyXG5cdG91dCA9IG91dC5wYWRFbmQgTkFNRV9MRU4sICcgJ1xyXG5cdG91dC5yZXBsYWNlQWxsIFwiIFwiLCBOQlNQXHJcblxyXG50b1NvcnRLZXkgPSAobmFtZSkgLT5cclxuXHRvdXQgPSBuYW1lID8gXCJcIlxyXG5cdGlmIG91dC5sZW5ndGggPiBOQU1FX0xFTiB0aGVuIG91dCA9IG91dC5zbGljZSAwLCBOQU1FX0xFTlxyXG5cdG91dC50cmltKCkudG9Mb2NhbGVMb3dlckNhc2UgJ3N2LVNFJ1xyXG5cclxuZXhwb3J0IGNsYXNzIFNlbGVjdFxyXG5cdGNvbnN0cnVjdG9yOiAoe2l0ZW1zID0gW10sIG9uQ291bnRDaGFuZ2UgPSBudWxsfSA9IHt9KSAtPlxyXG5cdFx0QG9uQ291bnRDaGFuZ2UgPSBvbkNvdW50Q2hhbmdlXHJcblx0XHRAc2VsZWN0ZWRJbmRleCA9IC0xXHJcblx0XHRAZWxlbWVudCA9IGRpdlxyXG5cdFx0XHR0YWJpbmRleDogXCIwXCJcclxuXHRcdFx0c3R5bGU6IFwiZm9udC1mYW1pbHk6bW9ub3NwYWNlOyBmb250LXNpemU6MTRweDsgd2lkdGg6MzYwcHg7IGhlaWdodDozNjBweDsgb3ZlcmZsb3cteTphdXRvOyBib3JkZXI6MXB4IHNvbGlkICM5OTk7IHdoaXRlLXNwYWNlOnByZTtcIlxyXG5cclxuXHRcdEBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIgJ2tleWRvd24nLCBAb25LZXlkb3duXHJcblxyXG5cdFx0Zm9yIG5hbWUgaW4gaXRlbXNcclxuXHRcdFx0QGFkZFBsYXllciBuYW1lXHJcblx0XHRAc2V0U2VsZWN0ZWRJbmRleCAwXHJcblx0XHRAbm90aWZ5Q291bnQoKVxyXG5cclxuXHRub3RpZnlDb3VudDogLT5cclxuXHRcdEBvbkNvdW50Q2hhbmdlPyBAZWxlbWVudC5jaGlsZHJlbi5sZW5ndGhcclxuXHJcblx0c2V0U2VsZWN0ZWRJbmRleDogKGkpIC0+XHJcblx0XHRjb3VudCA9IEBlbGVtZW50LmNoaWxkcmVuLmxlbmd0aFxyXG5cdFx0aWYgY291bnQgPT0gMFxyXG5cdFx0XHRAc2VsZWN0ZWRJbmRleCA9IC0xXHJcblx0XHRcdHJldHVyblxyXG5cclxuXHRcdG5leHQgPSBNYXRoLm1heCAwLCBNYXRoLm1pbiBpLCBjb3VudCAtIDFcclxuXHRcdGZvciByb3cgaW4gQGVsZW1lbnQuY2hpbGRyZW5cclxuXHRcdFx0cm93LnN0eWxlLmJhY2tncm91bmQgPSBcIlwiXHJcblxyXG5cdFx0QHNlbGVjdGVkSW5kZXggPSBuZXh0XHJcblx0XHRyb3cgPSBAZWxlbWVudC5jaGlsZHJlbltAc2VsZWN0ZWRJbmRleF1cclxuXHRcdHJvdy5zdHlsZS5iYWNrZ3JvdW5kID0gXCIjY2ZlOGZmXCJcclxuXHRcdHJvdy5zY3JvbGxJbnRvVmlldyBibG9jazogXCJuZWFyZXN0XCJcclxuXHJcblx0c29ydFBsYXllcnM6IChwcmVmZXJyZWRSb3cgPSBudWxsKSAtPlxyXG5cdFx0cm93cyA9IEFycmF5OjpzbGljZS5jYWxsIEBlbGVtZW50LmNoaWxkcmVuXHJcblx0XHRyb3dzLnNvcnQgKGEsIGIpIC0+IGEuZGF0YXNldC5zb3J0S2V5LmxvY2FsZUNvbXBhcmUgYi5kYXRhc2V0LnNvcnRLZXksICdzdicsIHNlbnNpdGl2aXR5OidiYXNlJ1xyXG5cdFx0Zm9yIHJvdyBpbiByb3dzXHJcblx0XHRcdEBlbGVtZW50LmFwcGVuZENoaWxkIHJvd1xyXG5cclxuXHRcdGlmIHJvd3MubGVuZ3RoID09IDBcclxuXHRcdFx0QHNlbGVjdGVkSW5kZXggPSAtMVxyXG5cdFx0XHRAbm90aWZ5Q291bnQoKVxyXG5cdFx0XHRyZXR1cm5cclxuXHJcblx0XHRpZiBwcmVmZXJyZWRSb3c/XHJcblx0XHRcdGkgPSByb3dzLmluZGV4T2YgcHJlZmVycmVkUm93XHJcblx0XHRcdGlmIGkgPCAwIHRoZW4gaSA9IDBcclxuXHRcdFx0QHNldFNlbGVjdGVkSW5kZXggaVxyXG5cdFx0ZWxzZVxyXG5cdFx0XHRAc2V0U2VsZWN0ZWRJbmRleCBNYXRoLm1heCAwLCBNYXRoLm1pbiBAc2VsZWN0ZWRJbmRleCwgcm93cy5sZW5ndGggLSAxXHJcblxyXG5cdFx0QG5vdGlmeUNvdW50KClcclxuXHJcblx0c2VsZWN0QnlJbml0aWFsOiAoY2hhciwgYmFja3dhcmRzID0gZmFsc2UpIC0+XHJcblx0XHRyb3dzID0gQXJyYXk6OnNsaWNlLmNhbGwgQGVsZW1lbnQuY2hpbGRyZW5cclxuXHRcdGlmIHJvd3MubGVuZ3RoID09IDAgdGhlbiByZXR1cm5cclxuXHJcblx0XHRuZWVkbGUgPSBjaGFyLnRvTG9jYWxlTG93ZXJDYXNlICdzdi1TRSdcclxuXHRcdG1hdGNoZXMgPSBbXVxyXG5cdFx0Zm9yIHJvdywgaSBpbiByb3dzIHdoZW4gcm93LmRhdGFzZXQuc29ydEtleT8uc3RhcnRzV2l0aCBuZWVkbGVcclxuXHRcdFx0bWF0Y2hlcy5wdXNoIGlcclxuXHJcblx0XHRpZiBtYXRjaGVzLmxlbmd0aCA9PSAwIHRoZW4gcmV0dXJuXHJcblxyXG5cdFx0aWYgYmFja3dhcmRzXHJcblx0XHRcdHJldk1hdGNoZXMgPSBtYXRjaGVzLnNsaWNlKCkucmV2ZXJzZSgpXHJcblx0XHRcdHRhcmdldCA9IHJldk1hdGNoZXNbMF1cclxuXHRcdFx0Zm9yIGkgaW4gcmV2TWF0Y2hlcyB3aGVuIGkgPCBAc2VsZWN0ZWRJbmRleFxyXG5cdFx0XHRcdHRhcmdldCA9IGlcclxuXHRcdFx0XHRicmVha1xyXG5cdFx0ZWxzZVxyXG5cdFx0XHR0YXJnZXQgPSBtYXRjaGVzWzBdXHJcblx0XHRcdGZvciBpIGluIG1hdGNoZXMgd2hlbiBpID4gQHNlbGVjdGVkSW5kZXhcclxuXHRcdFx0XHR0YXJnZXQgPSBpXHJcblx0XHRcdFx0YnJlYWtcclxuXHJcblx0XHRAc2V0U2VsZWN0ZWRJbmRleCB0YXJnZXRcclxuXHJcblx0YWRkUGxheWVyOiAobmFtZSwgcGljayA9IGZhbHNlKSAtPlxyXG5cdFx0cm93ID0gZGl2XHJcblx0XHRcdHN0eWxlOiBcImxpbmUtaGVpZ2h0OjE4cHg7IHBhZGRpbmc6MCA0cHg7IGN1cnNvcjpkZWZhdWx0O1wiXHJcblx0XHRcdGRhdGFzZXQ6IHNvcnRLZXk6IHRvU29ydEtleShuYW1lKVxyXG5cdFx0XHRmb3JtYXROYW1lKG5hbWUpXHJcblxyXG5cdFx0cm93LmFkZEV2ZW50TGlzdGVuZXIgXCJjbGlja1wiLCA9PlxyXG5cdFx0XHRpID0gQXJyYXk6OmluZGV4T2YuY2FsbCBAZWxlbWVudC5jaGlsZHJlbiwgcm93XHJcblx0XHRcdGlmIGkgPj0gMFxyXG5cdFx0XHRcdEBzZXRTZWxlY3RlZEluZGV4IGlcclxuXHRcdFx0XHRAZWxlbWVudC5mb2N1cygpXHJcblxyXG5cdFx0QGVsZW1lbnQuYXBwZW5kQ2hpbGQgcm93XHJcblx0XHRAc29ydFBsYXllcnMgaWYgcGljayB0aGVuIHJvdyBlbHNlIG51bGxcclxuXHJcblx0cmVtb3ZlU2VsZWN0ZWQ6IC0+XHJcblx0XHRjb3VudCA9IEBlbGVtZW50LmNoaWxkcmVuLmxlbmd0aFxyXG5cdFx0aWYgY291bnQgPT0gMCB0aGVuIHJldHVyblxyXG5cclxuXHRcdGkgPSBpZiBAc2VsZWN0ZWRJbmRleCA+PSAwIHRoZW4gQHNlbGVjdGVkSW5kZXggZWxzZSBjb3VudCAtIDFcclxuXHRcdEBlbGVtZW50LnJlbW92ZUNoaWxkIEBlbGVtZW50LmNoaWxkcmVuW2ldXHJcblxyXG5cdFx0aWYgQGVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoID09IDBcclxuXHRcdFx0QHNlbGVjdGVkSW5kZXggPSAtMVxyXG5cdFx0XHRAbm90aWZ5Q291bnQoKVxyXG5cdFx0XHRyZXR1cm5cclxuXHJcblx0XHRAc2V0U2VsZWN0ZWRJbmRleCBNYXRoLm1pbiBpLCBAZWxlbWVudC5jaGlsZHJlbi5sZW5ndGggLSAxXHJcblx0XHRAbm90aWZ5Q291bnQoKVxyXG5cclxuXHRjbGVhcjogLT5cclxuXHRcdEBlbGVtZW50LmlubmVySFRNTCA9ICcnXHJcblx0XHRAc2VsZWN0ZWRJbmRleCA9IC0xXHJcblx0XHRAbm90aWZ5Q291bnQoKVxyXG5cclxuXHRmb2N1czogLT5cclxuXHRcdEBlbGVtZW50LmZvY3VzKClcclxuXHJcblx0b25LZXlkb3duOiAoZSkgPT5cclxuXHRcdGlmIGUua2V5ID09ICdBcnJvd1VwJ1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KClcclxuXHRcdFx0QHNldFNlbGVjdGVkSW5kZXggQHNlbGVjdGVkSW5kZXggLSAxXHJcblx0XHRlbHNlIGlmIGUua2V5ID09ICdBcnJvd0Rvd24nXHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKVxyXG5cdFx0XHRAc2V0U2VsZWN0ZWRJbmRleCBAc2VsZWN0ZWRJbmRleCArIDFcclxuXHRcdGVsc2UgaWYgZS5rZXkubGVuZ3RoID09IDEgYW5kIG5vdCBlLmN0cmxLZXkgYW5kIG5vdCBlLm1ldGFLZXkgYW5kIG5vdCBlLmFsdEtleVxyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KClcclxuXHRcdFx0QHNlbGVjdEJ5SW5pdGlhbCBlLmtleSwgZS5zaGlmdEtleVxyXG4iXX0=
//# sourceURL=c:\github\2026\012-select\select.coffee