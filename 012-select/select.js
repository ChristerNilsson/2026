// Generated by CoffeeScript 2.7.0
var NAME_LEN, NBSP, div, toSortKey;

import {
  tag
} from './fasthtml.js';

div = tag("div");

NAME_LEN = 21;

NBSP = "\u00A0";

toSortKey = function(name) { // name
  var out;
  //name = name.textContent
  out = name != null ? name : "";
  if (out.length > NAME_LEN) {
    out = out.slice(0, NAME_LEN);
  }
  return out.trim().toLocaleLowerCase('sv-SE');
};

export var Select = class Select {
  constructor({items = [], onCountChange: onCountChange = null} = {}) {
    var j, len, name;
    this.onKeydown = this.onKeydown.bind(this);
    this.onCountChange = onCountChange;
    // @onCountChange = onCountChange
    this.selectedIndex = -1;
    this.element = div({
      tabindex: "0",
      style: "font-family:monospace; font-size:14px; width:370px; height:360px; overflow:auto; border:1px solid #000; white-space:nowrap; word-break:keep-all; overflow-wrap:normal; hyphens:none;"
    });
    this.element.addEventListener('keydown', this.onKeydown);
    this.element.addEventListener('focus', () => {
      return this.paintSelection();
    });
    this.element.addEventListener('blur', () => {
      return this.paintSelection();
    });
    for (j = 0, len = items.length; j < len; j++) {
      name = items[j];
      this.add(name);
    }
    this.setSelectedIndex(0);
    this.notifyCount();
  }

  notifyCount() {
    return typeof this.onCountChange === "function" ? this.onCountChange(this.element.children.length) : void 0;
  }

  setSelectedIndex(i) {
    var count, next, row;
    count = this.element.children.length;
    if (count === 0) {
      this.selectedIndex = -1;
      return;
    }
    if (!Number.isFinite(i)) {
      i = 0;
    }
    next = Math.max(0, Math.min(i, count - 1));
    this.selectedIndex = next;
    this.paintSelection();
    row = this.element.children[this.selectedIndex];
    return row.scrollIntoView({
      block: "nearest"
    });
  }

  paintSelection() {
    var j, len, ref, row;
    ref = this.element.children;
    for (j = 0, len = ref.length; j < len; j++) {
      row = ref[j];
      row.style.background = "";
    }
    if (this.selectedIndex < 0) {
      return;
    }
    row = this.element.children[this.selectedIndex];
    if (row == null) {
      return;
    }
    if (document.activeElement === this.element) {
      return row.style.background = "#cfe8ff";
    } else {
      return row.style.background = "#e8e8e8";
    }
  }

  sort(preferredRow = null) {
    var i, j, len, row, rows;
    rows = Array.prototype.slice.call(this.element.children);
    rows.sort(function(a, b) {
      return a.dataset.sortKey.localeCompare(b.dataset.sortKey, 'sv', {
        sensitivity: 'base'
      });
    });
    for (j = 0, len = rows.length; j < len; j++) {
      row = rows[j];
      this.element.appendChild(row);
    }
    if (rows.length === 0) {
      this.selectedIndex = -1;
      this.notifyCount();
      return;
    }
    if (preferredRow != null) {
      i = rows.indexOf(preferredRow);
      if (i < 0) {
        i = 0;
      }
      this.setSelectedIndex(i);
    } else {
      this.setSelectedIndex(Math.max(0, Math.min(this.selectedIndex, rows.length - 1)));
    }
    return this.notifyCount();
  }

  selectByInitial(char, backwards = false) {
    var i, j, k, l, len, len1, len2, matches, needle, ref, revMatches, row, rows, target;
    rows = Array.prototype.slice.call(this.element.children);
    if (rows.length === 0) {
      return;
    }
    needle = char.toLocaleLowerCase('sv-SE');
    matches = [];
    for (i = j = 0, len = rows.length; j < len; i = ++j) {
      row = rows[i];
      if ((ref = row.dataset.sortKey) != null ? ref.startsWith(needle) : void 0) {
        matches.push(i);
      }
    }
    if (matches.length === 0) {
      return;
    }
    if (backwards) {
      revMatches = matches.slice().reverse();
      target = revMatches[0];
      for (k = 0, len1 = revMatches.length; k < len1; k++) {
        i = revMatches[k];
        if (!(i < this.selectedIndex)) {
          continue;
        }
        target = i;
        break;
      }
    } else {
      target = matches[0];
      for (l = 0, len2 = matches.length; l < len2; l++) {
        i = matches[l];
        if (!(i > this.selectedIndex)) {
          continue;
        }
        target = i;
        break;
      }
    }
    return this.setSelectedIndex(target);
  }

  add(name, pick = false) {
    var row;
    row = div({
      class: "people",
      style: "line-height:18px; padding:0 4px; cursor:default; white-space:nowrap; word-break:keep-all; overflow-wrap:normal; hyphens:none;",
      dataset: {
        sortKey: toSortKey(name)
      }
    }, name);
    row.addEventListener("click", () => {
      var i;
      i = Array.prototype.indexOf.call(this.element.children, row);
      if (i >= 0) {
        this.setSelectedIndex(i);
        return this.element.focus();
      }
    });
    this.element.appendChild(row);
    return this.sort(pick ? row : null);
  }

  removeSelected() {
    var count, i;
    count = this.element.children.length;
    if (count === 0) {
      return;
    }
    i = this.selectedIndex >= 0 ? this.selectedIndex : count - 1;
    this.element.removeChild(this.element.children[i]);
    if (this.element.children.length === 0) {
      this.selectedIndex = -1;
      this.notifyCount();
      return;
    }
    this.setSelectedIndex(Math.min(i, this.element.children.length - 1));
    return this.notifyCount();
  }

  clear() {
    this.element.innerHTML = '';
    this.selectedIndex = -1;
    return this.notifyCount();
  }

  focus() {
    return this.element.focus();
  }

  onKeydown(e) {
    if (e.key === 'ArrowUp') {
      e.preventDefault();
      return this.setSelectedIndex(this.selectedIndex - 1);
    } else if (e.key === 'ArrowDown') {
      e.preventDefault();
      return this.setSelectedIndex(this.selectedIndex + 1);
    } else if (e.key.length === 1 && !e.ctrlKey && !e.metaKey && !e.altKey) {
      e.preventDefault();
      return this.selectByInitial(e.key, e.shiftKey);
    }
  }

};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0LmpzIiwic291cmNlUm9vdCI6IlxcIiwic291cmNlcyI6WyJzZWxlY3QuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxJQUFBLFFBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBOztBQUFBLE9BQUE7RUFBUSxHQUFSO0NBQUEsTUFBQTs7QUFFQSxHQUFBLEdBQU0sR0FBQSxDQUFJLEtBQUo7O0FBRU4sUUFBQSxHQUFXOztBQUNYLElBQUEsR0FBTzs7QUFFUCxTQUFBLEdBQVksUUFBQSxDQUFDLElBQUQsQ0FBQSxFQUFBO0FBRVosTUFBQSxHQUFBOztFQUFDLEdBQUEsa0JBQU0sT0FBTztFQUNiLElBQUcsR0FBRyxDQUFDLE1BQUosR0FBYSxRQUFoQjtJQUE4QixHQUFBLEdBQU0sR0FBRyxDQUFDLEtBQUosQ0FBVSxDQUFWLEVBQWEsUUFBYixFQUFwQzs7U0FDQSxHQUFHLENBQUMsSUFBSixDQUFBLENBQVUsQ0FBQyxpQkFBWCxDQUE2QixPQUE3QjtBQUpXOztBQU1aLE9BQUEsSUFBYSxTQUFOLE1BQUEsT0FBQTtFQUNOLFdBQWEsQ0FBQyxDQUFDLEtBQUEsR0FBUSxFQUFULDhCQUFhLEdBQWlCLElBQTlCLElBQXNDLENBQUEsQ0FBdkMsQ0FBQTtBQUNkLFFBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQTtRQThIQyxDQUFBLGdCQUFBLENBQUE7SUEvSDJCLElBQUMsQ0FBQSw4QkFDN0I7O0lBQ0UsSUFBQyxDQUFBLGFBQUQsR0FBaUIsQ0FBQztJQUNsQixJQUFDLENBQUEsT0FBRCxHQUFXLEdBQUEsQ0FDVjtNQUFBLFFBQUEsRUFBVSxHQUFWO01BQ0EsS0FBQSxFQUFPO0lBRFAsQ0FEVTtJQUlYLElBQUMsQ0FBQSxPQUFPLENBQUMsZ0JBQVQsQ0FBMEIsU0FBMUIsRUFBcUMsSUFBQyxDQUFBLFNBQXRDO0lBQ0EsSUFBQyxDQUFBLE9BQU8sQ0FBQyxnQkFBVCxDQUEwQixPQUExQixFQUFtQyxDQUFBLENBQUEsR0FBQTthQUFHLElBQUMs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QUFDLENBQUMsR0FBRyxDQUFDLE1BQU4sS0FBZ0IsQ0FBaEIsSUFBc0IsQ0FBSSxDQUFDLENBQUMsT0FBNUIsSUFBd0MsQ0FBSSxDQUFDLENBQUMsT0FBOUMsSUFBMEQsQ0FBSSxDQUFDLENBQUMsTUFBbkU7TUFDSixDQUFDLENBQUMsY0FBRixDQUFBO2FBQ0EsSUFBQyxDQUFBLGVBQUQsQ0FBaUIsQ0FBQyxDQUFDLEdBQW5CLEVBQXdCLENBQUMsQ0FBQyxRQUExQixFQUZJOztFQVBLOztBQWhJTCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7dGFnfSBmcm9tICcuL2Zhc3RodG1sLmpzJ1xyXG5cclxuZGl2ID0gdGFnIFwiZGl2XCJcclxuXHJcbk5BTUVfTEVOID0gMjFcclxuTkJTUCA9IFwiXFx1MDBBMFwiXHJcblxyXG50b1NvcnRLZXkgPSAobmFtZSkgLT4gIyBuYW1lXHJcblx0I25hbWUgPSBuYW1lLnRleHRDb250ZW50XHJcblx0b3V0ID0gbmFtZSA/IFwiXCJcclxuXHRpZiBvdXQubGVuZ3RoID4gTkFNRV9MRU4gdGhlbiBvdXQgPSBvdXQuc2xpY2UgMCwgTkFNRV9MRU5cclxuXHRvdXQudHJpbSgpLnRvTG9jYWxlTG93ZXJDYXNlICdzdi1TRSdcclxuXHJcbmV4cG9ydCBjbGFzcyBTZWxlY3RcclxuXHRjb25zdHJ1Y3RvcjogKHtpdGVtcyA9IFtdLCBAb25Db3VudENoYW5nZSA9IG51bGx9ID0ge30pIC0+XHJcblx0XHQjIEBvbkNvdW50Q2hhbmdlID0gb25Db3VudENoYW5nZVxyXG5cdFx0QHNlbGVjdGVkSW5kZXggPSAtMVxyXG5cdFx0QGVsZW1lbnQgPSBkaXZcclxuXHRcdFx0dGFiaW5kZXg6IFwiMFwiXHJcblx0XHRcdHN0eWxlOiBcImZvbnQtZmFtaWx5Om1vbm9zcGFjZTsgZm9udC1zaXplOjE0cHg7IHdpZHRoOjM3MHB4OyBoZWlnaHQ6MzYwcHg7IG92ZXJmbG93OmF1dG87IGJvcmRlcjoxcHggc29saWQgIzAwMDsgd2hpdGUtc3BhY2U6bm93cmFwOyB3b3JkLWJyZWFrOmtlZXAtYWxsOyBvdmVyZmxvdy13cmFwOm5vcm1hbDsgaHlwaGVuczpub25lO1wiXHJcblxyXG5cdFx0QGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAna2V5ZG93bicsIEBvbktleWRvd25cclxuXHRcdEBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIgJ2ZvY3VzJywgPT4gQHBhaW50U2VsZWN0aW9uKClcclxuXHRcdEBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIgJ2JsdXInLCA9PiBAcGFpbnRTZWxlY3Rpb24oKVxyXG5cclxuXHRcdGZvciBuYW1lIGluIGl0ZW1zXHJcblx0XHRcdEBhZGQgbmFtZVxyXG5cdFx0QHNldFNlbGVjdGVkSW5kZXggMFxyXG5cdFx0QG5vdGlmeUNvdW50KClcclxuXHJcblx0bm90aWZ5Q291bnQ6IC0+XHJcblx0XHRAb25Db3VudENoYW5nZT8gQGVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoXHJcblxyXG5cdHNldFNlbGVjdGVkSW5kZXg6IChpKSAtPlxyXG5cdFx0Y291bnQgPSBAZWxlbWVudC5jaGlsZHJlbi5sZW5ndGhcclxuXHRcdGlmIGNvdW50ID09IDBcclxuXHRcdFx0QHNlbGVjdGVkSW5kZXggPSAtMVxyXG5cdFx0XHRyZXR1cm5cclxuXHJcblx0XHRpZiBub3QgTnVtYmVyLmlzRmluaXRlKGkpIHRoZW4gaSA9IDBcclxuXHRcdG5leHQgPSBNYXRoLm1heCAwLCBNYXRoLm1pbiBpLCBjb3VudCAtIDFcclxuXHRcdEBzZWxlY3RlZEluZGV4ID0gbmV4dFxyXG5cdFx0QHBhaW50U2VsZWN0aW9uKClcclxuXHRcdHJvdyA9IEBlbGVtZW50LmNoaWxkcmVuW0BzZWxlY3RlZEluZGV4XVxyXG5cdFx0cm93LnNjcm9sbEludG9WaWV3IGJsb2NrOiBcIm5lYXJlc3RcIlxyXG5cclxuXHRwYWludFNlbGVjdGlvbjogLT5cclxuXHRcdGZvciByb3cgaW4gQGVsZW1lbnQuY2hpbGRyZW5cclxuXHRcdFx0cm93LnN0eWxlLmJhY2tncm91bmQgPSBcIlwiXHJcblx0XHRyZXR1cm4gaWYgQHNlbGVjdGVkSW5kZXggPCAwXHJcblx0XHRyb3cgPSBAZWxlbWVudC5jaGlsZHJlbltAc2VsZWN0ZWRJbmRleF1cclxuXHRcdHJldHVybiB1bmxlc3Mgcm93P1xyXG5cdFx0aWYgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBpcyBAZWxlbWVudFxyXG5cdFx0XHRyb3cuc3R5bGUuYmFja2dyb3VuZCA9IFwiI2NmZThmZlwiXHJcblx0XHRlbHNlXHJcblx0XHRcdHJvdy5zdHlsZS5iYWNrZ3JvdW5kID0gXCIjZThlOGU4XCJcclxuXHJcblx0c29ydDogKHByZWZlcnJlZFJvdyA9IG51bGwpIC0+XHJcblx0XHRyb3dzID0gQXJyYXk6OnNsaWNlLmNhbGwgQGVsZW1lbnQuY2hpbGRyZW5cclxuXHRcdHJvd3Muc29ydCAoYSwgYikgLT4gYS5kYXRhc2V0LnNvcnRLZXkubG9jYWxlQ29tcGFyZSBiLmRhdGFzZXQuc29ydEtleSwgJ3N2Jywgc2Vuc2l0aXZpdHk6J2Jhc2UnXHJcblx0XHRmb3Igcm93IGluIHJvd3NcclxuXHRcdFx0QGVsZW1lbnQuYXBwZW5kQ2hpbGQgcm93XHJcblxyXG5cdFx0aWYgcm93cy5sZW5ndGggPT0gMFxyXG5cdFx0XHRAc2VsZWN0ZWRJbmRleCA9IC0xXHJcblx0XHRcdEBub3RpZnlDb3VudCgpXHJcblx0XHRcdHJldHVyblxyXG5cclxuXHRcdGlmIHByZWZlcnJlZFJvdz9cclxuXHRcdFx0aSA9IHJvd3MuaW5kZXhPZiBwcmVmZXJyZWRSb3dcclxuXHRcdFx0aWYgaSA8IDAgdGhlbiBpID0gMFxyXG5cdFx0XHRAc2V0U2VsZWN0ZWRJbmRleCBpXHJcblx0XHRlbHNlXHJcblx0XHRcdEBzZXRTZWxlY3RlZEluZGV4IE1hdGgubWF4IDAsIE1hdGgubWluIEBzZWxlY3RlZEluZGV4LCByb3dzLmxlbmd0aCAtIDFcclxuXHJcblx0XHRAbm90aWZ5Q291bnQoKVxyXG5cclxuXHRzZWxlY3RCeUluaXRpYWw6IChjaGFyLCBiYWNrd2FyZHMgPSBmYWxzZSkgLT5cclxuXHRcdHJvd3MgPSBBcnJheTo6c2xpY2UuY2FsbCBAZWxlbWVudC5jaGlsZHJlblxyXG5cdFx0aWYgcm93cy5sZW5ndGggPT0gMCB0aGVuIHJldHVyblxyXG5cclxuXHRcdG5lZWRsZSA9IGNoYXIudG9Mb2NhbGVMb3dlckNhc2UgJ3N2LVNFJ1xyXG5cdFx0bWF0Y2hlcyA9IFtdXHJcblx0XHRmb3Igcm93LCBpIGluIHJvd3Mgd2hlbiByb3cuZGF0YXNldC5zb3J0S2V5Py5zdGFydHNXaXRoIG5lZWRsZVxyXG5cdFx0XHRtYXRjaGVzLnB1c2ggaVxyXG5cclxuXHRcdGlmIG1hdGNoZXMubGVuZ3RoID09IDAgdGhlbiByZXR1cm5cclxuXHJcblx0XHRpZiBiYWNrd2FyZHNcclxuXHRcdFx0cmV2TWF0Y2hlcyA9IG1hdGNoZXMuc2xpY2UoKS5yZXZlcnNlKClcclxuXHRcdFx0dGFyZ2V0ID0gcmV2TWF0Y2hlc1swXVxyXG5cdFx0XHRmb3IgaSBpbiByZXZNYXRjaGVzIHdoZW4gaSA8IEBzZWxlY3RlZEluZGV4XHJcblx0XHRcdFx0dGFyZ2V0ID0gaVxyXG5cdFx0XHRcdGJyZWFrXHJcblx0XHRlbHNlXHJcblx0XHRcdHRhcmdldCA9IG1hdGNoZXNbMF1cclxuXHRcdFx0Zm9yIGkgaW4gbWF0Y2hlcyB3aGVuIGkgPiBAc2VsZWN0ZWRJbmRleFxyXG5cdFx0XHRcdHRhcmdldCA9IGlcclxuXHRcdFx0XHRicmVha1xyXG5cclxuXHRcdEBzZXRTZWxlY3RlZEluZGV4IHRhcmdldFxyXG5cclxuXHRhZGQ6IChuYW1lLCBwaWNrID0gZmFsc2UpIC0+XHJcblx0XHRyb3cgPSBkaXZcclxuXHRcdFx0Y2xhc3M6IFwicGVvcGxlXCJcclxuXHRcdFx0c3R5bGU6IFwibGluZS1oZWlnaHQ6MThweDsgcGFkZGluZzowIDRweDsgY3Vyc29yOmRlZmF1bHQ7IHdoaXRlLXNwYWNlOm5vd3JhcDsgd29yZC1icmVhazprZWVwLWFsbDsgb3ZlcmZsb3ctd3JhcDpub3JtYWw7IGh5cGhlbnM6bm9uZTtcIlxyXG5cdFx0XHRkYXRhc2V0OiBzb3J0S2V5OiB0b1NvcnRLZXkobmFtZSlcclxuXHRcdFx0bmFtZVxyXG5cclxuXHRcdHJvdy5hZGRFdmVudExpc3RlbmVyIFwiY2xpY2tcIiwgPT5cclxuXHRcdFx0aSA9IEFycmF5OjppbmRleE9mLmNhbGwgQGVsZW1lbnQuY2hpbGRyZW4sIHJvd1xyXG5cdFx0XHRpZiBpID49IDBcclxuXHRcdFx0XHRAc2V0U2VsZWN0ZWRJbmRleCBpXHJcblx0XHRcdFx0QGVsZW1lbnQuZm9jdXMoKVxyXG5cclxuXHRcdEBlbGVtZW50LmFwcGVuZENoaWxkIHJvd1xyXG5cdFx0QHNvcnQgaWYgcGljayB0aGVuIHJvdyBlbHNlIG51bGxcclxuXHJcblx0cmVtb3ZlU2VsZWN0ZWQ6IC0+XHJcblx0XHRjb3VudCA9IEBlbGVtZW50LmNoaWxkcmVuLmxlbmd0aFxyXG5cdFx0aWYgY291bnQgPT0gMCB0aGVuIHJldHVyblxyXG5cclxuXHRcdGkgPSBpZiBAc2VsZWN0ZWRJbmRleCA+PSAwIHRoZW4gQHNlbGVjdGVkSW5kZXggZWxzZSBjb3VudCAtIDFcclxuXHRcdEBlbGVtZW50LnJlbW92ZUNoaWxkIEBlbGVtZW50LmNoaWxkcmVuW2ldXHJcblxyXG5cdFx0aWYgQGVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoID09IDBcclxuXHRcdFx0QHNlbGVjdGVkSW5kZXggPSAtMVxyXG5cdFx0XHRAbm90aWZ5Q291bnQoKVxyXG5cdFx0XHRyZXR1cm5cclxuXHJcblx0XHRAc2V0U2VsZWN0ZWRJbmRleCBNYXRoLm1pbiBpLCBAZWxlbWVudC5jaGlsZHJlbi5sZW5ndGggLSAxXHJcblx0XHRAbm90aWZ5Q291bnQoKVxyXG5cclxuXHRjbGVhcjogLT5cclxuXHRcdEBlbGVtZW50LmlubmVySFRNTCA9ICcnXHJcblx0XHRAc2VsZWN0ZWRJbmRleCA9IC0xXHJcblx0XHRAbm90aWZ5Q291bnQoKVxyXG5cclxuXHRmb2N1czogLT5cclxuXHRcdEBlbGVtZW50LmZvY3VzKClcclxuXHJcblx0b25LZXlkb3duOiAoZSkgPT5cclxuXHRcdGlmIGUua2V5ID09ICdBcnJvd1VwJ1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KClcclxuXHRcdFx0QHNldFNlbGVjdGVkSW5kZXggQHNlbGVjdGVkSW5kZXggLSAxXHJcblx0XHRlbHNlIGlmIGUua2V5ID09ICdBcnJvd0Rvd24nXHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKVxyXG5cdFx0XHRAc2V0U2VsZWN0ZWRJbmRleCBAc2VsZWN0ZWRJbmRleCArIDFcclxuXHRcdGVsc2UgaWYgZS5rZXkubGVuZ3RoID09IDEgYW5kIG5vdCBlLmN0cmxLZXkgYW5kIG5vdCBlLm1ldGFLZXkgYW5kIG5vdCBlLmFsdEtleVxyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KClcclxuXHRcdFx0QHNlbGVjdEJ5SW5pdGlhbCBlLmtleSwgZS5zaGlmdEtleVxyXG4iXX0=
//# sourceURL=c:\github\2025\035-FairPair\select.coffee